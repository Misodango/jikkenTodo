(function(){"use strict";var e={9560:function(e,l,t){var a=t(3751),o=t(641);const n={id:"app"};function s(e,l,t,a,s,r){const d=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)("div",n,[(0,o.bF)(d)])}var r={name:"App"},d=t(6262);const i=(0,d.A)(r,[["render",s]]);var u=i,c=t(5220);function p(e,l,t,a,n,s){const r=(0,o.g2)("v-card-title"),d=(0,o.g2)("v-btn"),i=(0,o.g2)("v-card-text"),u=(0,o.g2)("v-card"),c=(0,o.g2)("v-col"),p=(0,o.g2)("v-row"),m=(0,o.g2)("v-container");return(0,o.uX)(),(0,o.Wv)(m,{class:"fill-height",fluid:""},{default:(0,o.k6)((()=>[(0,o.bF)(p,{align:"center",justify:"center"},{default:(0,o.k6)((()=>[(0,o.bF)(c,{cols:"12",sm:"8",md:"6"},{default:(0,o.k6)((()=>[(0,o.bF)(u,{class:"elevation-12"},{default:(0,o.k6)((()=>[(0,o.bF)(r,{class:"text-h5 text-center"},{default:(0,o.k6)((()=>l[0]||(l[0]=[(0,o.eW)(" 実験TODOアプリへようこそ ")]))),_:1}),(0,o.bF)(i,null,{default:(0,o.k6)((()=>[l[3]||(l[3]=(0,o.Lk)("p",{class:"text-center"},"以下のオプションから選択してください：",-1)),(0,o.bF)(d,{onClick:s.login,color:"primary",block:"",class:"mt-2"},{default:(0,o.k6)((()=>l[1]||(l[1]=[(0,o.eW)(" ログイン ")]))),_:1},8,["onClick"]),(0,o.bF)(d,{onClick:s.signup,color:"secondary",block:"",class:"mt-2"},{default:(0,o.k6)((()=>l[2]||(l[2]=[(0,o.eW)(" 新規登録 ")]))),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}t(4114);var m={name:"StartScreen",methods:{login(){this.$router.push("/login")},signup(){this.$router.push("/signup")}}};const f=(0,d.A)(m,[["render",p]]);var g=f,v=t(33);function b(e,l,t,n,s,r){const d=(0,o.g2)("v-card-title"),i=(0,o.g2)("v-text-field"),u=(0,o.g2)("v-btn"),c=(0,o.g2)("v-form"),p=(0,o.g2)("v-card-text"),m=(0,o.g2)("v-alert"),f=(0,o.g2)("v-card"),g=(0,o.g2)("v-col"),b=(0,o.g2)("v-row"),k=(0,o.g2)("v-container");return(0,o.uX)(),(0,o.Wv)(k,{class:"fill-height"},{default:(0,o.k6)((()=>[(0,o.bF)(b,{justify:"center",align:"center"},{default:(0,o.k6)((()=>[(0,o.bF)(g,{cols:"12",sm:"8",md:"6",lg:"4"},{default:(0,o.k6)((()=>[(0,o.bF)(f,{class:"elevation-12 pa-4"},{default:(0,o.k6)((()=>[(0,o.bF)(d,{class:"text-center text-h4 font-weight-bold"},{default:(0,o.k6)((()=>l[4]||(l[4]=[(0,o.eW)(" Login ")]))),_:1}),(0,o.bF)(p,null,{default:(0,o.k6)((()=>[(0,o.bF)(c,{onSubmit:(0,a.D$)(r.handleLogin,["prevent"]),modelValue:s.valid,"onUpdate:modelValue":l[3]||(l[3]=e=>s.valid=e)},{default:(0,o.k6)((()=>[(0,o.bF)(i,{modelValue:s.email,"onUpdate:modelValue":l[0]||(l[0]=e=>s.email=e),label:"Email",type:"email",rules:s.emailRules,required:"","prepend-icon":"mdi-email",variant:"outlined",class:"mb-2"},null,8,["modelValue","rules"]),(0,o.bF)(i,{modelValue:s.password,"onUpdate:modelValue":l[1]||(l[1]=e=>s.password=e),label:"Password",type:s.showPassword?"text":"password",rules:s.passwordRules,required:"","prepend-icon":"mdi-lock","append-icon":s.showPassword?"mdi-eye-off":"mdi-eye","onClick:append":l[2]||(l[2]=e=>s.showPassword=!s.showPassword),variant:"outlined",class:"mb-4"},null,8,["modelValue","type","rules","append-icon"]),(0,o.bF)(u,{type:"submit",color:"primary",block:"",loading:s.loading,disabled:!s.valid||s.loading,size:"large"},{default:(0,o.k6)((()=>l[5]||(l[5]=[(0,o.eW)(" Login ")]))),_:1},8,["loading","disabled"])])),_:1},8,["onSubmit","modelValue"])])),_:1}),s.message?((0,o.uX)(),(0,o.Wv)(m,{key:0,type:s.message.includes("successful")?"success":"error",class:"mt-4"},{default:(0,o.k6)((()=>[(0,o.eW)((0,v.v_)(s.message),1)])),_:1},8,["type"])):(0,o.Q3)("",!0),(0,o.bF)(p,{class:"text-center mt-4"},{default:(0,o.k6)((()=>[l[7]||(l[7]=(0,o.eW)(" アカウントを持っていませんか? ")),(0,o.bF)(u,{variant:"text",color:"primary",to:"/signup"},{default:(0,o.k6)((()=>l[6]||(l[6]=[(0,o.eW)(" サインアップはこちら ")]))),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}var k=t(223),h=t(1884),_=t(5746),F=t(5904);const x={apiKey:"AIzaSyBHuYgEu5di4FUJmPsrA0EB_7j0VN-xUCk",authDomain:"jikkentodoapp.firebaseapp.com",projectId:"jikkentodoapp",storageBucket:"jikkentodoapp.firebasestorage.app",messagingSenderId:"44572662255",appId:"1:44572662255:web:d69ac54c0b27ed441d3e1a"},y=(0,k.Wp)(x),w=(0,h.aU)(y),V=(0,_.xI)(y);(0,F.c7)(y),(0,h.aU)(y);var W={data(){return{valid:!1,loading:!1,email:"",password:"",message:"",showPassword:!1,emailRules:[e=>!!e||"Email is required",e=>/.+@.+\..+/.test(e)||"Email must be valid"],passwordRules:[e=>!!e||"Password is required",e=>e.length>=6||"Password must be at least 6 characters"]}},methods:{async handleLogin(){if(this.valid){this.loading=!0,this.message="";try{await(0,_.x9)(V,this.email,this.password),this.message="Login successful!",this.$router.push("/dashboard")}catch(e){this.message=e.message}finally{this.loading=!1}}}}};const C=(0,d.A)(W,[["render",b]]);var P=C;function E(e,l,t,n,s,r){const d=(0,o.g2)("v-card-title"),i=(0,o.g2)("v-text-field"),u=(0,o.g2)("v-btn"),c=(0,o.g2)("v-form"),p=(0,o.g2)("v-card-text"),m=(0,o.g2)("v-alert"),f=(0,o.g2)("v-card"),g=(0,o.g2)("v-col"),b=(0,o.g2)("v-row"),k=(0,o.g2)("v-container");return(0,o.uX)(),(0,o.Wv)(k,{class:"fill-height"},{default:(0,o.k6)((()=>[(0,o.bF)(b,{justify:"center",align:"center"},{default:(0,o.k6)((()=>[(0,o.bF)(g,{cols:"12",sm:"8",md:"6",lg:"4"},{default:(0,o.k6)((()=>[(0,o.bF)(f,{class:"elevation-12 pa-4"},{default:(0,o.k6)((()=>[(0,o.bF)(d,{class:"text-center text-h4 font-weight-bold"},{default:(0,o.k6)((()=>l[7]||(l[7]=[(0,o.eW)(" サインアップ ")]))),_:1}),(0,o.bF)(p,null,{default:(0,o.k6)((()=>[(0,o.bF)(c,{onSubmit:(0,a.D$)(r.handleSignup,["prevent"]),modelValue:s.valid,"onUpdate:modelValue":l[6]||(l[6]=e=>s.valid=e)},{default:(0,o.k6)((()=>[(0,o.bF)(i,{modelValue:s.email,"onUpdate:modelValue":l[0]||(l[0]=e=>s.email=e),label:"Email",type:"email",rules:s.emailRules,required:"","prepend-icon":"mdi-email",variant:"outlined",class:"mb-2"},null,8,["modelValue","rules"]),(0,o.bF)(i,{modelValue:s.displayName,"onUpdate:modelValue":l[1]||(l[1]=e=>s.displayName=e),label:"表示名","prepend-icon":"mdi-rename",variant:"outlined",rules:s.displayNameRules,required:"",class:"mb-2"},null,8,["modelValue","rules"]),(0,o.bF)(i,{modelValue:s.password,"onUpdate:modelValue":l[2]||(l[2]=e=>s.password=e),label:"Password",type:s.showPassword?"text":"password",rules:s.passwordRules,required:"","prepend-icon":"mdi-lock","append-icon":s.showPassword?"mdi-eye-off":"mdi-eye","onClick:append":l[3]||(l[3]=e=>s.showPassword=!s.showPassword),variant:"outlined",class:"mb-4"},null,8,["modelValue","type","rules","append-icon"]),(0,o.bF)(i,{modelValue:s.confirmPassword,"onUpdate:modelValue":l[4]||(l[4]=e=>s.confirmPassword=e),label:"Confirm Password",type:s.showConfirmPassword?"text":"password",rules:s.confirmPasswordRules,required:"","prepend-icon":"mdi-lock-check","append-icon":s.showConfirmPassword?"mdi-eye-off":"mdi-eye","onClick:append":l[5]||(l[5]=e=>s.showConfirmPassword=!s.showConfirmPassword),variant:"outlined",class:"mb-4"},null,8,["modelValue","type","rules","append-icon"]),(0,o.bF)(u,{type:"submit",color:"primary",block:"",loading:s.loading,disabled:!s.valid||s.loading,size:"large"},{default:(0,o.k6)((()=>l[8]||(l[8]=[(0,o.eW)(" 登録 ")]))),_:1},8,["loading","disabled"])])),_:1},8,["onSubmit","modelValue"])])),_:1}),s.message?((0,o.uX)(),(0,o.Wv)(m,{key:0,type:s.message.includes("successful")?"success":"error",class:"mt-4"},{default:(0,o.k6)((()=>[(0,o.eW)((0,v.v_)(s.message),1)])),_:1},8,["type"])):(0,o.Q3)("",!0),(0,o.bF)(p,{class:"text-center mt-4"},{default:(0,o.k6)((()=>[l[10]||(l[10]=(0,o.eW)(" すでにアカウントをお持ちですか？ ")),(0,o.bF)(u,{variant:"text",color:"primary",to:"/login"},{default:(0,o.k6)((()=>l[9]||(l[9]=[(0,o.eW)(" ログインはこちら ")]))),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}var D={data(){return{valid:!1,loading:!1,email:"",password:"",confirmPassword:"",displayName:"",message:"",showPassword:!1,showConfirmPassword:!1,emailRules:[e=>!!e||"メールアドレスを入力してください.",e=>/.+@.+\..+/.test(e)||"有効なメールアドレスを入力してください."],passwordRules:[e=>!!e||"パスワードを入力してください.",e=>e.length>=6||"パスワードは最低6文字です."],confirmPasswordRules:[e=>!!e||"パスワードを確認してください.",e=>e===this.password||"パスワードが一致しません."],displayNameRules:[e=>!!e||"表示名を入力してください.",e=>e.length<=15||"表示名は15文字以下にしてください"]}},methods:{async handleSignup(){if(this.valid){this.loading=!0,this.message="";try{const l=await(0,_.eJ)(V,this.email,this.password);try{await(0,_.r7)(l.user,{displayName:this.displayName})}catch(e){this.message("ユーザー名を登録できませんでした.")}this.message="登録が完了しました!",this.$router.push("/login")}catch(e){this.message=e.message}finally{this.loading=!1}}}}};const S=(0,d.A)(D,[["render",E]]);var U=S;t(8992),t(4520);const X={class:"pa-4"},I={class:"text-truncate"};function R(e,l,t,a,n,s){const r=(0,o.g2)("v-icon"),d=(0,o.g2)("v-card-title"),i=(0,o.g2)("v-card"),u=(0,o.g2)("v-col"),c=(0,o.g2)("v-row"),p=(0,o.g2)("v-select"),m=(0,o.g2)("v-text-field"),f=(0,o.g2)("v-card-subtitle"),g=(0,o.g2)("v-card-item"),b=(0,o.g2)("v-chip"),k=(0,o.g2)("v-card-text"),h=(0,o.g2)("v-spacer"),_=(0,o.g2)("v-btn"),F=(0,o.g2)("v-card-actions"),x=(0,o.g2)("v-alert"),y=(0,o.g2)("v-container");return(0,o.uX)(),(0,o.Wv)(y,{fluid:""},{default:(0,o.k6)((()=>[(0,o.bF)(c,{class:"mb-6"},{default:(0,o.k6)((()=>[(0,o.bF)(u,{cols:"12"},{default:(0,o.k6)((()=>[(0,o.bF)(i,null,{default:(0,o.k6)((()=>[(0,o.bF)(d,{class:"text-h5 d-flex align-center"},{default:(0,o.k6)((()=>[(0,o.bF)(r,{start:"",class:"me-2"},{default:(0,o.k6)((()=>l[4]||(l[4]=[(0,o.eW)("mdi-view-dashboard")]))),_:1}),l[5]||(l[5]=(0,o.eW)(" 実験一覧 "))])),_:1})])),_:1})])),_:1})])),_:1}),(0,o.bF)(c,{class:"mb-4"},{default:(0,o.k6)((()=>[(0,o.bF)(u,{cols:"12",sm:"4"},{default:(0,o.k6)((()=>[(0,o.bF)(p,{modelValue:a.filter,"onUpdate:modelValue":l[0]||(l[0]=e=>a.filter=e),items:a.filterOptions,label:"ステータス","prepend-inner-icon":"mdi-filter",clearable:""},null,8,["modelValue","items"])])),_:1}),(0,o.bF)(u,{cols:"12",sm:"4"},{default:(0,o.k6)((()=>[(0,o.bF)(p,{modelValue:a.sortBy,"onUpdate:modelValue":l[1]||(l[1]=e=>a.sortBy=e),items:a.sortOptions,label:"並び替え","prepend-inner-icon":"mdi-sort"},null,8,["modelValue","items"])])),_:1}),(0,o.bF)(u,{cols:"12",sm:"4"},{default:(0,o.k6)((()=>[(0,o.bF)(m,{modelValue:a.search,"onUpdate:modelValue":l[2]||(l[2]=e=>a.search=e),label:"実験を検索","prepend-inner-icon":"mdi-magnify",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),(0,o.bF)(c,null,{default:(0,o.k6)((()=>[(0,o.bF)(u,{cols:"12"},{default:(0,o.k6)((()=>[(0,o.bF)(i,null,{default:(0,o.k6)((()=>[(0,o.Lk)("div",X,[(0,o.bF)(c,null,{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.filteredExperiments,(e=>((0,o.uX)(),(0,o.Wv)(u,{key:e.id,cols:"12",sm:"6",md:"4"},{default:(0,o.k6)((()=>[(0,o.bF)(i,{class:(0,v.C4)(["experiment-card",{completed:"completed"===e.status}]),onClick:l=>a.navigateToExperiment(e.id)},{default:(0,o.k6)((()=>[(0,o.bF)(g,null,{prepend:(0,o.k6)((()=>[(0,o.bF)(r,{color:a.getStatusColor(e.status),size:"large",class:"me-2"},{default:(0,o.k6)((()=>l[6]||(l[6]=[(0,o.eW)(" mdi-flask ")]))),_:2},1032,["color"])])),default:(0,o.k6)((()=>[(0,o.bF)(d,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,v.v_)(e.title),1)])),_:2},1024),(0,o.bF)(f,null,{default:(0,o.k6)((()=>[(0,o.eW)(" 予定日: "+(0,v.v_)(a.formatDate(e.date)),1)])),_:2},1024)])),_:2},1024),(0,o.bF)(k,null,{default:(0,o.k6)((()=>[(0,o.Lk)("div",I,(0,v.v_)(e.description||"説明なし"),1),(0,o.bF)(b,{class:"mt-2",color:a.getStatusColor(e.status),size:"small",label:""},{default:(0,o.k6)((()=>[(0,o.eW)((0,v.v_)(a.getStatusText(e.status)),1)])),_:2},1032,["color"])])),_:2},1024),(0,o.bF)(F,null,{default:(0,o.k6)((()=>[(0,o.bF)(h),(0,o.bF)(_,{variant:"text",color:"primary",to:`/experiment/${e.id}`},{default:(0,o.k6)((()=>[l[8]||(l[8]=(0,o.eW)(" 詳細を見る ")),(0,o.bF)(r,{end:""},{default:(0,o.k6)((()=>l[7]||(l[7]=[(0,o.eW)("mdi-arrow-right")]))),_:1})])),_:2},1032,["to"])])),_:2},1024)])),_:2},1032,["class","onClick"])])),_:2},1024)))),128))])),_:1}),0===a.filteredExperiments.length?((0,o.uX)(),(0,o.Wv)(x,{key:0,type:"info",variant:"tonal",class:"mt-4"},{default:(0,o.k6)((()=>l[9]||(l[9]=[(0,o.eW)(" 実験が見つかりません。新しい実験を登録してみましょう！ ")]))),_:1})):(0,o.Q3)("",!0)])])),_:1})])),_:1})])),_:1}),(0,o.bF)(_,{class:"floating-btn",color:"primary",icon:"mdi-plus",size:"x-large",onClick:l[3]||(l[3]=l=>e.$router.push("/register"))})])),_:1})}t(3949),t(1454);var j=t(953),O={name:"DashboardScreen",setup(){const e=(0,c.rd)(),l=(0,j.KR)([]),t=(0,j.KR)(""),a=(0,j.KR)("date"),n=(0,j.KR)(""),s=[{title:"すべて",value:""},{title:"予定",value:"pending"},{title:"進行中",value:"inProgress"},{title:"完了",value:"completed"}],r=[{title:"日付順",value:"date"},{title:"タイトル順",value:"title"},{title:"ステータス順",value:"status"}],d=(0,o.EW)((()=>{let e=[...l.value];return n.value&&(e=e.filter((e=>e.title.toLowerCase().includes(n.value.toLowerCase())||e.description?.toLowerCase().includes(n.value.toLowerCase())))),t.value&&(e=e.filter((e=>e.status===t.value))),e.sort(((e,l)=>{switch(a.value){case"date":return new Date(e.date)-new Date(l.date);case"title":return e.title.localeCompare(l.title);case"status":return e.status.localeCompare(l.status);default:return 0}})),e})),i=async()=>{try{const e=(0,h.P)((0,h.rJ)(w,"experiments"),(0,h._M)("userId","==",V.currentUser?.displayName||"")),t=await(0,h.GG)(e);t.forEach((e=>{console.log(e.id," => ",e.data())})),l.value=t.docs.map((e=>({id:e.id,...e.data()})))}catch(e){console.error("Error fetching experiments:",e)}},u=e=>new Date(e).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"}),p=e=>{const l={pending:"grey",inProgress:"blue",completed:"green"};return l[e]||"grey"},m=e=>{const l={pending:"予定",inProgress:"進行中",completed:"完了"};return l[e]||"不明"},f=l=>{e.push(`/experiment/${l}`)};return(0,o.sV)((()=>{i()})),{experiments:l,filter:t,filterOptions:s,sortBy:a,sortOptions:r,search:n,filteredExperiments:d,formatDate:u,getStatusColor:p,getStatusText:m,navigateToExperiment:f}}};const K=(0,d.A)(O,[["render",R],["__scopeId","data-v-354ea9f6"]]);var L=K;function N(e,l,t,a,n,s){const r=(0,o.g2)("v-icon"),d=(0,o.g2)("v-card-title"),i=(0,o.g2)("v-text-field"),u=(0,o.g2)("v-textarea"),c=(0,o.g2)("v-file-input"),p=(0,o.g2)("ExperimentEditor"),m=(0,o.g2)("v-progress-linear"),f=(0,o.g2)("v-expansion-panel-title"),g=(0,o.g2)("v-btn"),b=(0,o.g2)("v-expansion-panel-text"),k=(0,o.g2)("v-expansion-panel"),h=(0,o.g2)("v-expansion-panels"),_=(0,o.g2)("v-row"),F=(0,o.g2)("v-form"),x=(0,o.g2)("v-card-text"),y=(0,o.g2)("v-card"),w=(0,o.g2)("v-col"),V=(0,o.g2)("v-container");return(0,o.uX)(),(0,o.Wv)(V,{fluid:""},{default:(0,o.k6)((()=>[(0,o.bF)(_,{class:"mb-6"},{default:(0,o.k6)((()=>[(0,o.bF)(w,{cols:"12"},{default:(0,o.k6)((()=>[(0,o.bF)(y,{class:"mb-4"},{default:(0,o.k6)((()=>[(0,o.bF)(d,{class:"text-h5 d-flex align-center"},{default:(0,o.k6)((()=>[(0,o.bF)(r,{start:"",class:"me-2"},{default:(0,o.k6)((()=>l[7]||(l[7]=[(0,o.eW)("mdi-file-clock-outline")]))),_:1}),l[8]||(l[8]=(0,o.eW)(" 実験スケジュールを登録 "))])),_:1}),(0,o.bF)(x,null,{default:(0,o.k6)((()=>[(0,o.bF)(F,{ref:"form",modelValue:a.valid,"onUpdate:modelValue":l[6]||(l[6]=e=>a.valid=e)},{default:(0,o.k6)((()=>[(0,o.bF)(i,{modelValue:a.experimentData.purpose,"onUpdate:modelValue":l[0]||(l[0]=e=>a.experimentData.purpose=e),label:"実験の目的",required:"",rules:[e=>!!e||"実験の目的は必須です"]},null,8,["modelValue","rules"]),(0,o.bF)(u,{modelValue:a.experimentData.procedure,"onUpdate:modelValue":l[1]||(l[1]=e=>a.experimentData.procedure=e),label:"実験手順",required:"",rules:[e=>!!e||"実験手順は必須です"]},null,8,["modelValue","rules"]),(0,o.bF)(u,{modelValue:a.experimentData.precautions,"onUpdate:modelValue":l[2]||(l[2]=e=>a.experimentData.precautions=e),label:"注意事項"},null,8,["modelValue"]),(0,o.bF)(c,{modelValue:a.files,"onUpdate:modelValue":[l[3]||(l[3]=e=>a.files=e),a.handleFileUpload],label:"写真・PDFをアップロード",accept:"image/*,.pdf",multiple:"","show-size":"",loading:a.ocrProcessing,disabled:a.ocrProcessing,hint:"画像ファイルをアップロードしてください","persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","loading","disabled"]),a.showEditor?((0,o.uX)(),(0,o.Wv)(p,{key:0,"experiment-data":a.generatedData,onSaved:a.handleSaved},null,8,["experiment-data","onSaved"])):(0,o.Q3)("",!0),a.ocrProcessing?((0,o.uX)(),(0,o.Wv)(m,{key:1,indeterminate:"",color:"primary",class:"mb-4"})):(0,o.Q3)("",!0),a.ocrResults.length>0?((0,o.uX)(),(0,o.Wv)(h,{key:2},{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.ocrResults,((e,t)=>((0,o.uX)(),(0,o.Wv)(k,{key:t},{default:(0,o.k6)((()=>[(0,o.bF)(f,null,{default:(0,o.k6)((()=>[(0,o.eW)(" 文字認識結果 #"+(0,v.v_)(t+1),1)])),_:2},1024),(0,o.bF)(b,null,{default:(0,o.k6)((()=>[(0,o.bF)(u,{modelValue:a.ocrResults[t].text,"onUpdate:modelValue":e=>a.ocrResults[t].text=e,label:"抽出テキスト",hint:"テキストを編集できます","auto-grow":"",rows:"5"},null,8,["modelValue","onUpdate:modelValue"]),(0,o.bF)(g,{color:"primary",size:"small",class:"mt-2",onClick:e=>a.appendToProcedure(t)},{default:(0,o.k6)((()=>l[9]||(l[9]=[(0,o.eW)(" 手順に追加 ")]))),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})):(0,o.Q3)("",!0),(0,o.bF)(_,{class:"mt-4"},{default:(0,o.k6)((()=>[(0,o.bF)(g,{disabled:!a.valid,color:"primary",onClick:l[4]||(l[4]=e=>s.processWithGemini())},{default:(0,o.k6)((()=>l[10]||(l[10]=[(0,o.eW)(" AIでまとめる ")]))),_:1},8,["disabled"])])),_:1}),(0,o.bF)(p,{modelValue:a.showEditor,"onUpdate:modelValue":l[5]||(l[5]=e=>a.showEditor=e),"experiment-data":a.generatedData,onSaved:a.handleSaved},null,8,["modelValue","experiment-data","onSaved"])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}const $={key:0,class:"ml-4"};function A(e,l,t,n,s,r){const d=(0,o.g2)("v-spacer"),i=(0,o.g2)("v-icon"),u=(0,o.g2)("v-btn"),c=(0,o.g2)("v-card-title"),p=(0,o.g2)("v-text-field"),m=(0,o.g2)("v-col"),f=(0,o.g2)("v-textarea"),g=(0,o.g2)("v-row"),b=(0,o.g2)("v-chip"),k=(0,o.g2)("v-chip-group"),h=(0,o.g2)("v-card"),_=(0,o.g2)("v-form"),F=(0,o.g2)("v-card-text"),x=(0,o.g2)("v-card-actions"),y=(0,o.g2)("v-dialog");return(0,o.uX)(),(0,o.Wv)(y,{"model-value":t.modelValue,"onUpdate:modelValue":l[5]||(l[5]=l=>e.$emit("update:modelValue",l)),"max-width":"900px"},{default:(0,o.k6)((()=>[(0,o.bF)(h,null,{default:(0,o.k6)((()=>[(0,o.bF)(c,{class:"text-h5"},{default:(0,o.k6)((()=>[l[7]||(l[7]=(0,o.eW)(" 実験データの確認・編集 ")),(0,o.bF)(d),(0,o.bF)(u,{icon:"",onClick:n.closeDialog},{default:(0,o.k6)((()=>[(0,o.bF)(i,null,{default:(0,o.k6)((()=>l[6]||(l[6]=[(0,o.eW)("mdi-close")]))),_:1})])),_:1},8,["onClick"])])),_:1}),n.localData?((0,o.uX)(),(0,o.Wv)(F,{key:0},{default:(0,o.k6)((()=>[(0,o.bF)(_,{ref:"form"},{default:(0,o.k6)((()=>[(0,o.bF)(g,null,{default:(0,o.k6)((()=>[(0,o.bF)(m,{cols:"12",sm:"6"},{default:(0,o.k6)((()=>[(0,o.bF)(p,{modelValue:n.localData.title,"onUpdate:modelValue":l[0]||(l[0]=e=>n.localData.title=e),label:"実験タイトル",required:""},null,8,["modelValue"])])),_:1}),(0,o.bF)(m,{cols:"12",sm:"6"},{default:(0,o.k6)((()=>[(0,o.bF)(p,{modelValue:n.localData.date,"onUpdate:modelValue":l[1]||(l[1]=e=>n.localData.date=e),label:"実施日",type:"date"},null,8,["modelValue"])])),_:1}),(0,o.bF)(m,{cols:"12"},{default:(0,o.k6)((()=>[(0,o.bF)(f,{modelValue:n.localData.objective,"onUpdate:modelValue":l[2]||(l[2]=e=>n.localData.objective=e),label:"実験目的",rows:"3"},null,8,["modelValue"])])),_:1})])),_:1}),(0,o.bF)(h,{class:"mb-4 pa-4"},{default:(0,o.k6)((()=>[(0,o.bF)(c,{class:"text-h6"},{default:(0,o.k6)((()=>l[8]||(l[8]=[(0,o.eW)("実験手順")]))),_:1}),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.localData.steps,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{key:t,class:"mb-4"},[(0,o.bF)(g,null,{default:(0,o.k6)((()=>[(0,o.bF)(m,{cols:"12"},{default:(0,o.k6)((()=>[(0,o.bF)(p,{modelValue:e.description,"onUpdate:modelValue":l=>e.description=l,label:`Step ${e.stepId}: 手順説明`},null,8,["modelValue","onUpdate:modelValue","label"])])),_:2},1024)])),_:2},1024),(0,o.bF)(g,{class:"ml-4"},{default:(0,o.k6)((()=>[(0,o.bF)(m,{cols:"12"},{default:(0,o.k6)((()=>[(0,o.bF)(k,{column:""},{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.materials,((l,t)=>((0,o.uX)(),(0,o.Wv)(b,{key:t,closable:"","onClick:close":l=>e.materials.splice(t,1)},{default:(0,o.k6)((()=>[(0,o.eW)((0,v.v_)(l),1)])),_:2},1032,["onClick:close"])))),128))])),_:2},1024),(0,o.bF)(p,{modelValue:n.newMaterial,"onUpdate:modelValue":l[3]||(l[3]=e=>n.newMaterial=e),label:"材料を追加","append-icon":"mdi-plus","onClick:append":l=>n.addMaterial(e),onKeyup:(0,a.jR)((l=>n.addMaterial(e)),["enter"])},null,8,["modelValue","onClick:append","onKeyup"])])),_:2},1024)])),_:2},1024),e.subSteps?((0,o.uX)(),(0,o.CE)("div",$,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.subSteps,((e,l)=>((0,o.uX)(),(0,o.CE)("div",{key:l},[(0,o.bF)(g,null,{default:(0,o.k6)((()=>[(0,o.bF)(m,{cols:"12"},{default:(0,o.k6)((()=>[(0,o.bF)(p,{modelValue:e.description,"onUpdate:modelValue":l=>e.description=l,label:`サブステップ ${e.stepId}`},null,8,["modelValue","onUpdate:modelValue","label"])])),_:2},1024)])),_:2},1024)])))),128))])):(0,o.Q3)("",!0),(0,o.bF)(p,{modelValue:e.notes,"onUpdate:modelValue":l=>e.notes=l,label:"注意点",class:"ml-4"},null,8,["modelValue","onUpdate:modelValue"])])))),128))])),_:1}),(0,o.bF)(h,{class:"mb-4 pa-4"},{default:(0,o.k6)((()=>[(0,o.bF)(c,{class:"text-h6"},{default:(0,o.k6)((()=>l[9]||(l[9]=[(0,o.eW)("注意事項")]))),_:1}),(0,o.bF)(g,null,{default:(0,o.k6)((()=>[(0,o.bF)(m,{cols:"12"},{default:(0,o.k6)((()=>[(0,o.bF)(k,{column:""},{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.localData.precautions,((e,l)=>((0,o.uX)(),(0,o.Wv)(b,{key:l,closable:"","onClick:close":e=>n.localData.precautions.splice(l,1)},{default:(0,o.k6)((()=>[(0,o.eW)((0,v.v_)(e),1)])),_:2},1032,["onClick:close"])))),128))])),_:1}),(0,o.bF)(p,{modelValue:n.newPrecaution,"onUpdate:modelValue":l[4]||(l[4]=e=>n.newPrecaution=e),label:"注意事項を追加","append-icon":"mdi-plus","onClick:append":n.addPrecaution,onKeyup:(0,a.jR)(n.addPrecaution,["enter"])},null,8,["modelValue","onClick:append","onKeyup"])])),_:1})])),_:1})])),_:1})])),_:1},512)])),_:1})):(0,o.Q3)("",!0),(0,o.bF)(x,null,{default:(0,o.k6)((()=>[(0,o.bF)(d),(0,o.bF)(u,{color:"error",onClick:n.closeDialog},{default:(0,o.k6)((()=>l[10]||(l[10]=[(0,o.eW)("キャンセル")]))),_:1},8,["onClick"]),(0,o.bF)(u,{color:"primary",onClick:n.saveExperiment},{default:(0,o.k6)((()=>l[11]||(l[11]=[(0,o.eW)("保存")]))),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["model-value"])}var q={name:"ExperimentEditor",props:{modelValue:{type:Boolean,required:!0},experimentData:{type:Object,required:!0}},emits:["update:modelValue","saved"],setup(e,{emit:l}){const t=(0,j.KR)(null),a=(0,j.KR)(""),n=(0,j.KR)("");(0,o.wB)((()=>e.experimentData),(e=>{e&&(t.value=JSON.parse(JSON.stringify(e)))}),{immediate:!0,deep:!0});const s=()=>{l("update:modelValue",!1)},r=e=>{a.value.trim()&&(e.materials.push(a.value.trim()),a.value="")},d=()=>{n.value.trim()&&(t.value.precautions.push(n.value.trim()),n.value="")},i=async()=>{try{const e=(0,h.aU)();t.value.createdAt=new Date;const a=await(0,h.gS)((0,h.rJ)(e,"experiments"),t.value);l("saved",a.id),s(),alert("実験データが保存されました")}catch(e){console.error("Error saving experiment:",e),alert("保存中にエラーが発生しました")}};return{localData:t,newMaterial:a,newPrecaution:n,closeDialog:s,addMaterial:r,addPrecaution:d,saveExperiment:i}}};const Q=(0,d.A)(q,[["render",A]]);var M=Q,J=t(4995);const{GoogleGenerativeAI:T}=t(6445);var z={name:"RegisterScreen",components:{ExperimentEditor:M},data(){return{displayName:""}},created(){(0,_.hg)(V,(e=>{this.displayName=e?e.displayName:""}))},setup(){const e=(0,j.KR)(!1),l=(0,j.KR)(!1),t=(0,j.KR)(!1),a=(0,j.KR)([]),o=(0,j.KR)(!1),n=(0,j.KR)([]),s=(0,j.Kh)({purpose:"",procedure:"",precautions:"",scheduledDate:null,notificationEnabled:!1}),r=()=>{e.value=!e.value},d=(0,j.KR)(null),i=async e=>{if(!e||!Array.isArray(e)||0===e.length)return void console.log("No files selected");const l=e.filter((e=>e&&e.type&&e.type.startsWith("image/")));if(0!==l.length){o.value=!0,n.value=[];try{const e=await(0,J.createWorker)("jpn");for(const a of l)try{const l=await e.recognize(a);n.value.push({text:l.data.text,filename:a.name})}catch(t){console.error(`Error processing file ${a.name}:`,t),n.value.push({text:"",error:t.message,filename:a.name})}await e.terminate()}catch(t){console.error("OCR processing failed:",t)}finally{o.value=!1}}else console.log("No valid image files found")},u=e=>{n.value[e]&&n.value[e].text&&(s.procedure=s.procedure?`${s.procedure}\n\n${n.value[e].text}`:n.value[e].text,n.value="")},c=async()=>{if(s.procedure){t.value=!0;try{const e=(0,h.aU)();await(0,h.gS)((0,h.rJ)(e,"experiments"),{...s,generatedData:d.value,createdAt:new Date})}catch(e){console.error("Data submission failed:",e)}finally{t.value=!1}}else console.log("No procedure data")},p=l=>{e.value=!1,d.value=null,console.log(l)};return{valid:l,loading:t,files:a,ocrProcessing:o,ocrResults:n,experimentData:s,generatedData:d,handleFileUpload:i,appendToProcedure:u,submitData:c,showEditor:e,handleSaved:p,toggleEditor:r}},methods:{async processWithGemini(){const e=this.experimentData;if(console.log(e),!e)return void console.log("No text to process");const l=new T("AIzaSyDabHWSMe6kUQ0YOd5QrK1c8gd3Lur-nWw"),t=l.getGenerativeModel({model:"gemini-1.5-flash"});console.log(t);const a=12345,o=`\n      outpu JSON only(without writing \`\`\`json)\n    実験をしています．つぎのデータ簡単にまとめ，それを基に，以下のJSON Schemaのような形式でまとめて出力してください.文章に余計な空白は含めないでください.JSONは{からはじめて\`などは含まないでください.データは画像認識で文字起こしされたものであり，変な場合があるので，補正ができるならば考慮.\n\n    ${e.purpose},${e.procedure},${e.precautions}\n    {\n      "experimentId": "${a}",\n      "userId": "${this.displayName}",\n      "title": "",\n      "objective": "",\n        "date": "${this.experimentData.scheduledDate}",\n      "steps": [\n        {\n          "stepId": "1",\n          "description": "",\n          "materials": ["", "", ""],\n          "checked": false,\n          "notes": "",\n          "subSteps": [\n            {\n              "stepId": "1.1",\n              "description": "",\n              "checked": false,\n              "notes": ""\n            }\n          ]\n        },\n        {\n          "stepId": "2",\n          "description": "",\n          "materials": [""],\n          "checked": false,\n          "notes": ""\n        },\n        {\n          "stepId": "3",\n          "description": "",\n          "materials": [""],\n          "checked": false,\n          "notes": ""\n        }\n      ],\n      "precautions": [\n        "",\n        ""\n      ],\n      "equipmentPhotos": [\n        {\n          "name": "",\n          "photoUrl": ""\n        }\n      ]\n    }`;try{const e=await t.generateContent(o),l=e.response,a=l.text();console.log(a,typeof a);try{const e=JSON.parse(a);this.generatedData=e,this.showEditor=!0,console.log(this.showEditor)}catch(n){console.error("JSON parsing error:",n),alert("データの形式が不正です。もう一度お試しください。")}}catch(s){console.error("API error:",s),alert("データの生成中にエラーが発生しました。")}}}};const B=(0,d.A)(z,[["render",N],["__scopeId","data-v-119e38a5"]]);var G=B;const H={class:"max-w-4xl mx-auto p-6"},Y={class:"text-subtitle-2"},Z={class:"mb-4"},ee={class:"mb-4"},le={class:"d-flex justify-space-between mb-2"},te={class:"text-subtitle-2 font-weight-medium"},ae={class:"d-flex align-center"},oe={class:"font-weight-bold"},ne={class:"text-subtitle-2"},se={key:1,class:"mt-4"},re={key:0,class:"text-center"},de=["src","alt"],ie={class:"mt-2"};function ue(e,l,t,n,s,r){const d=(0,o.g2)("v-card-title"),i=(0,o.g2)("v-progress-linear"),u=(0,o.g2)("v-card-text"),c=(0,o.g2)("v-card"),p=(0,o.g2)("v-icon"),m=(0,o.g2)("v-list-item-icon"),f=(0,o.g2)("v-list-item-title"),g=(0,o.g2)("v-list-item-content"),b=(0,o.g2)("v-list-item"),k=(0,o.g2)("v-list"),h=(0,o.g2)("v-checkbox"),_=(0,o.g2)("v-expansion-panel-header"),F=(0,o.g2)("v-list-item-subtitle"),x=(0,o.g2)("v-alert"),y=(0,o.g2)("v-btn"),w=(0,o.g2)("v-card-actions"),V=(0,o.g2)("v-expansion-panel-content"),W=(0,o.g2)("v-expansion-panel"),C=(0,o.g2)("v-expansion-panels"),P=(0,o.g2)("v-spacer"),E=(0,o.g2)("v-dialog");return(0,o.uX)(),(0,o.CE)("div",H,[(0,o.bF)(c,{class:"mb-6"},{default:(0,o.k6)((()=>[(0,o.bF)(d,{class:"text-h5"},{default:(0,o.k6)((()=>[(0,o.eW)((0,v.v_)(s.experiment.title)+" ",1),(0,o.Lk)("div",Y,"実施予定日: "+(0,v.v_)(s.experiment.date),1)])),_:1}),(0,o.bF)(u,null,{default:(0,o.k6)((()=>[(0,o.Lk)("div",Z,[l[4]||(l[4]=(0,o.Lk)("h3",{class:"font-weight-bold mb-2"},"実験の目的:",-1)),(0,o.Lk)("p",null,(0,v.v_)(s.experiment.objective),1)]),(0,o.Lk)("div",ee,[(0,o.Lk)("div",le,[l[5]||(l[5]=(0,o.Lk)("span",{class:"text-subtitle-2 font-weight-medium"},"進捗状況",-1)),(0,o.Lk)("span",te,(0,v.v_)(s.progressPercentage)+"%",1)]),(0,o.bF)(i,{modelValue:s.progressPercentage,"onUpdate:modelValue":l[0]||(l[0]=e=>s.progressPercentage=e),color:"primary",height:"10"},null,8,["modelValue"])])])),_:1})])),_:1}),(0,o.bF)(c,{class:"mb-6 warning-card"},{default:(0,o.k6)((()=>[(0,o.bF)(d,{class:"d-flex align-center"},{default:(0,o.k6)((()=>[(0,o.bF)(p,{color:"warning",class:"mr-2"},{default:(0,o.k6)((()=>l[6]||(l[6]=[(0,o.eW)("mdi-alert")]))),_:1}),l[7]||(l[7]=(0,o.eW)(" 注意事項 "))])),_:1}),(0,o.bF)(u,null,{default:(0,o.k6)((()=>[(0,o.bF)(k,null,{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(s.experiment.precautions,((e,t)=>((0,o.uX)(),(0,o.Wv)(b,{key:t},{default:(0,o.k6)((()=>[(0,o.bF)(m,null,{default:(0,o.k6)((()=>[(0,o.bF)(p,{color:"warning"},{default:(0,o.k6)((()=>l[8]||(l[8]=[(0,o.eW)("mdi-alert-circle-outline")]))),_:1})])),_:1}),(0,o.bF)(g,null,{default:(0,o.k6)((()=>[(0,o.bF)(f,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,v.v_)(e),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1}),(0,o.bF)(C,null,{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(s.experiment.steps,(e=>((0,o.uX)(),(0,o.Wv)(W,{key:e.stepId},{default:(0,o.k6)((()=>[(0,o.bF)(_,null,{default:(0,o.k6)((()=>[(0,o.Lk)("div",ae,[(0,o.bF)(h,{modelValue:e.checked,"onUpdate:modelValue":l=>e.checked=l,onChange:r.updateProgress,onClick:l[1]||(l[1]=(0,a.D$)((()=>{}),["stop"])),class:"mr-2"},null,8,["modelValue","onUpdate:modelValue","onChange"]),(0,o.Lk)("div",null,[(0,o.Lk)("div",oe,"Step "+(0,v.v_)(e.stepId),1),(0,o.Lk)("div",ne,(0,v.v_)(e.description),1)])])])),_:2},1024),(0,o.bF)(V,null,{default:(0,o.k6)((()=>[e.materials&&e.materials.length?((0,o.uX)(),(0,o.Wv)(c,{key:0,flat:""},{default:(0,o.k6)((()=>[(0,o.bF)(d,{class:"text-subtitle-1 font-weight-bold"},{default:(0,o.k6)((()=>l[9]||(l[9]=[(0,o.eW)(" 必要な器具・材料: ")]))),_:1}),(0,o.bF)(u,null,{default:(0,o.k6)((()=>[(0,o.bF)(k,{dense:""},{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.materials,((e,t)=>((0,o.uX)(),(0,o.Wv)(b,{key:t},{default:(0,o.k6)((()=>[(0,o.bF)(m,null,{default:(0,o.k6)((()=>[(0,o.bF)(p,null,{default:(0,o.k6)((()=>l[10]||(l[10]=[(0,o.eW)("mdi-flask")]))),_:1})])),_:1}),(0,o.bF)(g,null,{default:(0,o.k6)((()=>[(0,o.bF)(f,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,v.v_)(e),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1024)])),_:2},1024)):(0,o.Q3)("",!0),e.subSteps?((0,o.uX)(),(0,o.CE)("div",se,[(0,o.bF)(c,{flat:""},{default:(0,o.k6)((()=>[(0,o.bF)(d,{class:"text-subtitle-1 font-weight-bold"},{default:(0,o.k6)((()=>l[11]||(l[11]=[(0,o.eW)(" 詳細手順: ")]))),_:1}),(0,o.bF)(u,null,{default:(0,o.k6)((()=>[(0,o.bF)(k,{dense:""},{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.subSteps,(e=>((0,o.uX)(),(0,o.Wv)(b,{key:e.stepId},{default:(0,o.k6)((()=>[(0,o.bF)(m,null,{default:(0,o.k6)((()=>[(0,o.bF)(h,{modelValue:e.checked,"onUpdate:modelValue":l=>e.checked=l,onChange:r.updateProgress},null,8,["modelValue","onUpdate:modelValue","onChange"])])),_:2},1024),(0,o.bF)(g,null,{default:(0,o.k6)((()=>[(0,o.bF)(f,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,v.v_)(e.stepId)+": "+(0,v.v_)(e.description),1)])),_:2},1024),e.notes?((0,o.uX)(),(0,o.Wv)(F,{key:0,class:"mt-1"},{default:(0,o.k6)((()=>[(0,o.eW)(" Note: "+(0,v.v_)(e.notes),1)])),_:2},1024)):(0,o.Q3)("",!0)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1024)])),_:2},1024)])):(0,o.Q3)("",!0),e.notes?((0,o.uX)(),(0,o.Wv)(c,{key:2,flat:"",class:"mt-4"},{default:(0,o.k6)((()=>[(0,o.bF)(d,{class:"text-subtitle-1 font-weight-bold"},{default:(0,o.k6)((()=>l[12]||(l[12]=[(0,o.eW)(" 注意点: ")]))),_:1}),(0,o.bF)(u,null,{default:(0,o.k6)((()=>[(0,o.bF)(x,{type:"info",text:"",outlined:""},{default:(0,o.k6)((()=>[(0,o.eW)((0,v.v_)(e.notes),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)):(0,o.Q3)("",!0),(0,o.bF)(c,{flat:"",class:"mt-4"},{default:(0,o.k6)((()=>[(0,o.bF)(w,null,{default:(0,o.k6)((()=>[(0,o.bF)(y,{color:"primary",outlined:"",onClick:l=>r.capturePhoto(e.stepId)},{default:(0,o.k6)((()=>[(0,o.bF)(p,{left:""},{default:(0,o.k6)((()=>l[13]||(l[13]=[(0,o.eW)("mdi-camera")]))),_:1}),l[14]||(l[14]=(0,o.eW)(" 写真を撮影 "))])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),(0,o.bF)(E,{modelValue:s.showPhotoDialog,"onUpdate:modelValue":l[3]||(l[3]=e=>s.showPhotoDialog=e),"max-width":"500px"},{default:(0,o.k6)((()=>[(0,o.bF)(c,null,{default:(0,o.k6)((()=>[(0,o.bF)(d,null,{default:(0,o.k6)((()=>[l[16]||(l[16]=(0,o.eW)(" 写真プレビュー ")),(0,o.bF)(P),(0,o.bF)(y,{icon:"",onClick:l[2]||(l[2]=e=>s.showPhotoDialog=!1)},{default:(0,o.k6)((()=>[(0,o.bF)(p,null,{default:(0,o.k6)((()=>l[15]||(l[15]=[(0,o.eW)("mdi-close")]))),_:1})])),_:1})])),_:1}),(0,o.bF)(u,null,{default:(0,o.k6)((()=>[s.selectedPhoto?((0,o.uX)(),(0,o.CE)("div",re,[(0,o.Lk)("img",{src:s.selectedPhoto.photoUrl,class:"max-width-100",alt:s.selectedPhoto.name},null,8,de),(0,o.Lk)("div",ie,(0,v.v_)(s.selectedPhoto.name),1)])):(0,o.Q3)("",!0)])),_:1})])),_:1})])),_:1},8,["modelValue"])])}var ce={name:"ExperimentViewer",data(){return{experiment:{title:"",objective:"",date:"",steps:[],precautions:[],equipmentPhotos:[],id:""},progressPercentage:0,showPhotoDialog:!1,selectedPhoto:null}},async mounted(){await this.loadExperiment(),this.updateProgress()},methods:{async loadExperiment(){this.experiment.id=this.$route.params.id,console.log(this.experiment.id);try{const e=(0,h.H9)(w,"experiments",this.experiment.id),l=await(0,h.x7)(e);l.exists()&&(this.experiment={id:l.id,...l.data()})}catch(e){console.error("実験データ読み込みエラー:",e)}},updateProgress(){const e=this.experiment.steps.length,l=this.experiment.steps.filter((e=>e.checked)).length;this.progressPercentage=Math.round(l/e*100),this.saveProgress()},async saveProgress(){try{const e=(0,h.H9)(w,"experiments",this.experiment.id);await(0,h.mZ)(e,{steps:this.experiment.steps})}catch(e){console.error("進捗保存エラー:",e)}},async capturePhoto(e){console.log(`Step ${e}の写真を撮影`)}}};const pe=(0,d.A)(ce,[["render",ue],["__scopeId","data-v-7d6cc943"]]);var me=pe;const fe=[{path:"/",name:"Start",component:g},{path:"/login",name:"Login",component:P},{path:"/signup",name:"Signup",component:U},{path:"/dashboard",name:"Dashboard",component:L},{path:"/register",name:"Register",component:G},{path:"/experiment/:id",name:"Experiment",component:me,props:!0}],ge=(0,c.aE)({history:(0,c.LA)("/jikkenTodo/"),routes:fe});var ve=ge,be=(t(5524),t(4825)),ke=t(2938),he=t(3379),_e=t(1050),Fe=(0,be.$N)({components:ke,directives:he,icons:{defaultSet:"mdi",aliases:_e.z,sets:{mdi:_e.r}},theme:{defaultTheme:"light"},defaults:{VDialog:{scrollable:!0,VCard:{elevation:0}}}}),xe=t(4335),ye=t(1021);const we=(0,a.Ef)(u);we.use(ve),we.use(Fe),we.use(ye.A),we.use(xe.A),we.mount("#app")}},l={};function t(a){var o=l[a];if(void 0!==o)return o.exports;var n=l[a]={id:a,loaded:!1,exports:{}};return e[a].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}t.m=e,function(){t.amdO={}}(),function(){var e=[];t.O=function(l,a,o,n){if(!a){var s=1/0;for(u=0;u<e.length;u++){a=e[u][0],o=e[u][1],n=e[u][2];for(var r=!0,d=0;d<a.length;d++)(!1&n||s>=n)&&Object.keys(t.O).every((function(e){return t.O[e](a[d])}))?a.splice(d--,1):(r=!1,n<s&&(s=n));if(r){e.splice(u--,1);var i=o();void 0!==i&&(l=i)}}return l}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[a,o,n]}}(),function(){t.d=function(e,l){for(var a in l)t.o(l,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:l[a]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.hmd=function(e){return e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e}}(),function(){t.o=function(e,l){return Object.prototype.hasOwnProperty.call(e,l)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};t.O.j=function(l){return 0===e[l]};var l=function(l,a){var o,n,s=a[0],r=a[1],d=a[2],i=0;if(s.some((function(l){return 0!==e[l]}))){for(o in r)t.o(r,o)&&(t.m[o]=r[o]);if(d)var u=d(t)}for(l&&l(a);i<s.length;i++)n=s[i],t.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return t.O(u)},a=self["webpackChunkjikken_todo_app"]=self["webpackChunkjikken_todo_app"]||[];a.forEach(l.bind(null,0)),a.push=l.bind(null,a.push.bind(a))}();var a=t.O(void 0,[504],(function(){return t(9560)}));a=t.O(a)})();
//# sourceMappingURL=app.02ca27f8.js.map