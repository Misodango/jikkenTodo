(function(){"use strict";var e={1865:function(e,l,t){var a=t(3751),o=t(641);const s={id:"app"};function n(e,l,t,a,n,r){const d=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)("div",s,[(0,o.bF)(d)])}var r={name:"App"},d=t(6262);const i=(0,d.A)(r,[["render",n]]);var u=i,c=t(5220);function p(e,l,t,a,s,n){const r=(0,o.g2)("v-card-title"),d=(0,o.g2)("v-btn"),i=(0,o.g2)("v-card-text"),u=(0,o.g2)("v-card"),c=(0,o.g2)("v-col"),p=(0,o.g2)("v-row"),m=(0,o.g2)("v-container");return(0,o.uX)(),(0,o.Wv)(m,{class:"fill-height",fluid:""},{default:(0,o.k6)((()=>[(0,o.bF)(p,{align:"center",justify:"center"},{default:(0,o.k6)((()=>[(0,o.bF)(c,{cols:"12",sm:"8",md:"6"},{default:(0,o.k6)((()=>[(0,o.bF)(u,{class:"elevation-12"},{default:(0,o.k6)((()=>[(0,o.bF)(r,{class:"text-h5 text-center"},{default:(0,o.k6)((()=>l[0]||(l[0]=[(0,o.eW)(" 実験TODOアプリへようこそ ")]))),_:1}),(0,o.bF)(i,null,{default:(0,o.k6)((()=>[l[3]||(l[3]=(0,o.Lk)("p",{class:"text-center"},"以下のオプションから選択してください：",-1)),(0,o.bF)(d,{onClick:n.login,color:"primary",block:"",class:"mt-2"},{default:(0,o.k6)((()=>l[1]||(l[1]=[(0,o.eW)(" ログイン ")]))),_:1},8,["onClick"]),(0,o.bF)(d,{onClick:n.signup,color:"secondary",block:"",class:"mt-2"},{default:(0,o.k6)((()=>l[2]||(l[2]=[(0,o.eW)(" 新規登録 ")]))),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}t(4114);var m={name:"StartScreen",methods:{login(){this.$router.push("/login")},signup(){this.$router.push("/signup")}}};const f=(0,d.A)(m,[["render",p]]);var v=f,g=t(33);function b(e,l,t,s,n,r){const d=(0,o.g2)("v-card-title"),i=(0,o.g2)("v-text-field"),u=(0,o.g2)("v-btn"),c=(0,o.g2)("v-form"),p=(0,o.g2)("v-card-text"),m=(0,o.g2)("v-alert"),f=(0,o.g2)("v-card"),v=(0,o.g2)("v-col"),b=(0,o.g2)("v-row"),k=(0,o.g2)("v-container");return(0,o.uX)(),(0,o.Wv)(k,{class:"fill-height"},{default:(0,o.k6)((()=>[(0,o.bF)(b,{justify:"center",align:"center"},{default:(0,o.k6)((()=>[(0,o.bF)(v,{cols:"12",sm:"8",md:"6",lg:"4"},{default:(0,o.k6)((()=>[(0,o.bF)(f,{class:"elevation-12 pa-4"},{default:(0,o.k6)((()=>[(0,o.bF)(d,{class:"text-center text-h4 font-weight-bold"},{default:(0,o.k6)((()=>l[4]||(l[4]=[(0,o.eW)(" Login ")]))),_:1}),(0,o.bF)(p,null,{default:(0,o.k6)((()=>[(0,o.bF)(c,{onSubmit:(0,a.D$)(r.handleLogin,["prevent"]),modelValue:n.valid,"onUpdate:modelValue":l[3]||(l[3]=e=>n.valid=e)},{default:(0,o.k6)((()=>[(0,o.bF)(i,{modelValue:n.email,"onUpdate:modelValue":l[0]||(l[0]=e=>n.email=e),label:"Email",type:"email",rules:n.emailRules,required:"","prepend-icon":"mdi-email",variant:"outlined",class:"mb-2"},null,8,["modelValue","rules"]),(0,o.bF)(i,{modelValue:n.password,"onUpdate:modelValue":l[1]||(l[1]=e=>n.password=e),label:"Password",type:n.showPassword?"text":"password",rules:n.passwordRules,required:"","prepend-icon":"mdi-lock","append-icon":n.showPassword?"mdi-eye-off":"mdi-eye","onClick:append":l[2]||(l[2]=e=>n.showPassword=!n.showPassword),variant:"outlined",class:"mb-4"},null,8,["modelValue","type","rules","append-icon"]),(0,o.bF)(u,{type:"submit",color:"primary",block:"",loading:n.loading,disabled:!n.valid||n.loading,size:"large"},{default:(0,o.k6)((()=>l[5]||(l[5]=[(0,o.eW)(" Login ")]))),_:1},8,["loading","disabled"])])),_:1},8,["onSubmit","modelValue"])])),_:1}),n.message?((0,o.uX)(),(0,o.Wv)(m,{key:0,type:n.message.includes("successful")?"success":"error",class:"mt-4"},{default:(0,o.k6)((()=>[(0,o.eW)((0,g.v_)(n.message),1)])),_:1},8,["type"])):(0,o.Q3)("",!0),(0,o.bF)(p,{class:"text-center mt-4"},{default:(0,o.k6)((()=>[l[7]||(l[7]=(0,o.eW)(" アカウントを持っていませんか? ")),(0,o.bF)(u,{variant:"text",color:"primary",to:"/signup"},{default:(0,o.k6)((()=>l[6]||(l[6]=[(0,o.eW)(" サインアップはこちら ")]))),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}var k=t(223),h=t(1884),_=t(5746),F=t(5904);const x={apiKey:"AIzaSyBHuYgEu5di4FUJmPsrA0EB_7j0VN-xUCk",authDomain:"jikkentodoapp.firebaseapp.com",projectId:"jikkentodoapp",storageBucket:"jikkentodoapp.firebasestorage.app",messagingSenderId:"44572662255",appId:"1:44572662255:web:d69ac54c0b27ed441d3e1a"},w=(0,k.Wp)(x),y=(0,h.aU)(w),V=(0,_.xI)(w);(0,F.c7)(w),(0,h.aU)(w);var W={data(){return{valid:!1,loading:!1,email:"",password:"",message:"",showPassword:!1,emailRules:[e=>!!e||"Email is required",e=>/.+@.+\..+/.test(e)||"Email must be valid"],passwordRules:[e=>!!e||"Password is required",e=>e.length>=6||"Password must be at least 6 characters"]}},methods:{async handleLogin(){if(this.valid){this.loading=!0,this.message="";try{await(0,_.x9)(V,this.email,this.password),this.message="Login successful!",this.$router.push("/dashboard")}catch(e){this.message=e.message}finally{this.loading=!1}}}}};const C=(0,d.A)(W,[["render",b]]);var P=C;function E(e,l,t,s,n,r){const d=(0,o.g2)("v-card-title"),i=(0,o.g2)("v-text-field"),u=(0,o.g2)("v-btn"),c=(0,o.g2)("v-form"),p=(0,o.g2)("v-card-text"),m=(0,o.g2)("v-alert"),f=(0,o.g2)("v-card"),v=(0,o.g2)("v-col"),b=(0,o.g2)("v-row"),k=(0,o.g2)("v-container");return(0,o.uX)(),(0,o.Wv)(k,{class:"fill-height"},{default:(0,o.k6)((()=>[(0,o.bF)(b,{justify:"center",align:"center"},{default:(0,o.k6)((()=>[(0,o.bF)(v,{cols:"12",sm:"8",md:"6",lg:"4"},{default:(0,o.k6)((()=>[(0,o.bF)(f,{class:"elevation-12 pa-4"},{default:(0,o.k6)((()=>[(0,o.bF)(d,{class:"text-center text-h4 font-weight-bold"},{default:(0,o.k6)((()=>l[7]||(l[7]=[(0,o.eW)(" サインアップ ")]))),_:1}),(0,o.bF)(p,null,{default:(0,o.k6)((()=>[(0,o.bF)(c,{onSubmit:(0,a.D$)(r.handleSignup,["prevent"]),modelValue:n.valid,"onUpdate:modelValue":l[6]||(l[6]=e=>n.valid=e)},{default:(0,o.k6)((()=>[(0,o.bF)(i,{modelValue:n.email,"onUpdate:modelValue":l[0]||(l[0]=e=>n.email=e),label:"Email",type:"email",rules:n.emailRules,required:"","prepend-icon":"mdi-email",variant:"outlined",class:"mb-2"},null,8,["modelValue","rules"]),(0,o.bF)(i,{modelValue:n.displayName,"onUpdate:modelValue":l[1]||(l[1]=e=>n.displayName=e),label:"表示名","prepend-icon":"mdi-rename",variant:"outlined",rules:n.displayNameRules,required:"",class:"mb-2"},null,8,["modelValue","rules"]),(0,o.bF)(i,{modelValue:n.password,"onUpdate:modelValue":l[2]||(l[2]=e=>n.password=e),label:"Password",type:n.showPassword?"text":"password",rules:n.passwordRules,required:"","prepend-icon":"mdi-lock","append-icon":n.showPassword?"mdi-eye-off":"mdi-eye","onClick:append":l[3]||(l[3]=e=>n.showPassword=!n.showPassword),variant:"outlined",class:"mb-4"},null,8,["modelValue","type","rules","append-icon"]),(0,o.bF)(i,{modelValue:n.confirmPassword,"onUpdate:modelValue":l[4]||(l[4]=e=>n.confirmPassword=e),label:"Confirm Password",type:n.showConfirmPassword?"text":"password",rules:n.confirmPasswordRules,required:"","prepend-icon":"mdi-lock-check","append-icon":n.showConfirmPassword?"mdi-eye-off":"mdi-eye","onClick:append":l[5]||(l[5]=e=>n.showConfirmPassword=!n.showConfirmPassword),variant:"outlined",class:"mb-4"},null,8,["modelValue","type","rules","append-icon"]),(0,o.bF)(u,{type:"submit",color:"primary",block:"",loading:n.loading,disabled:!n.valid||n.loading,size:"large"},{default:(0,o.k6)((()=>l[8]||(l[8]=[(0,o.eW)(" 登録 ")]))),_:1},8,["loading","disabled"])])),_:1},8,["onSubmit","modelValue"])])),_:1}),n.message?((0,o.uX)(),(0,o.Wv)(m,{key:0,type:n.message.includes("successful")?"success":"error",class:"mt-4"},{default:(0,o.k6)((()=>[(0,o.eW)((0,g.v_)(n.message),1)])),_:1},8,["type"])):(0,o.Q3)("",!0),(0,o.bF)(p,{class:"text-center mt-4"},{default:(0,o.k6)((()=>[l[10]||(l[10]=(0,o.eW)(" すでにアカウントをお持ちですか？ ")),(0,o.bF)(u,{variant:"text",color:"primary",to:"/login"},{default:(0,o.k6)((()=>l[9]||(l[9]=[(0,o.eW)(" ログインはこちら ")]))),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}var D={data(){return{valid:!1,loading:!1,email:"",password:"",confirmPassword:"",displayName:"",message:"",showPassword:!1,showConfirmPassword:!1,emailRules:[e=>!!e||"メールアドレスを入力してください.",e=>/.+@.+\..+/.test(e)||"有効なメールアドレスを入力してください."],passwordRules:[e=>!!e||"パスワードを入力してください.",e=>e.length>=6||"パスワードは最低6文字です."],confirmPasswordRules:[e=>!!e||"パスワードを確認してください.",e=>e===this.password||"パスワードが一致しません."],displayNameRules:[e=>!!e||"表示名を入力してください.",e=>e.length<=15||"表示名は15文字以下にしてください"]}},methods:{async handleSignup(){if(this.valid){this.loading=!0,this.message="";try{const l=await(0,_.eJ)(V,this.email,this.password);try{await(0,_.r7)(l.user,{displayName:this.displayName})}catch(e){this.message("ユーザー名を登録できませんでした.")}this.message="登録が完了しました!",this.$router.push("/login")}catch(e){this.message=e.message}finally{this.loading=!1}}}}};const S=(0,d.A)(D,[["render",E]]);var U=S;t(8992),t(4520);const X={class:"pa-4"},I={class:"text-truncate"};function R(e,l,t,a,s,n){const r=(0,o.g2)("v-icon"),d=(0,o.g2)("v-card-title"),i=(0,o.g2)("v-card"),u=(0,o.g2)("v-col"),c=(0,o.g2)("v-row"),p=(0,o.g2)("v-select"),m=(0,o.g2)("v-text-field"),f=(0,o.g2)("v-card-subtitle"),v=(0,o.g2)("v-card-item"),b=(0,o.g2)("v-chip"),k=(0,o.g2)("v-card-text"),h=(0,o.g2)("v-spacer"),_=(0,o.g2)("v-btn"),F=(0,o.g2)("v-card-actions"),x=(0,o.g2)("v-alert"),w=(0,o.g2)("v-container");return(0,o.uX)(),(0,o.Wv)(w,{fluid:""},{default:(0,o.k6)((()=>[(0,o.bF)(c,{class:"mb-6"},{default:(0,o.k6)((()=>[(0,o.bF)(u,{cols:"12"},{default:(0,o.k6)((()=>[(0,o.bF)(i,null,{default:(0,o.k6)((()=>[(0,o.bF)(d,{class:"text-h5 d-flex align-center"},{default:(0,o.k6)((()=>[(0,o.bF)(r,{start:"",class:"me-2"},{default:(0,o.k6)((()=>l[4]||(l[4]=[(0,o.eW)("mdi-view-dashboard")]))),_:1}),l[5]||(l[5]=(0,o.eW)(" 実験一覧 "))])),_:1})])),_:1})])),_:1})])),_:1}),(0,o.bF)(c,{class:"mb-4"},{default:(0,o.k6)((()=>[(0,o.bF)(u,{cols:"12",sm:"4"},{default:(0,o.k6)((()=>[(0,o.bF)(p,{modelValue:a.filter,"onUpdate:modelValue":l[0]||(l[0]=e=>a.filter=e),items:a.filterOptions,label:"ステータス","prepend-inner-icon":"mdi-filter",clearable:""},null,8,["modelValue","items"])])),_:1}),(0,o.bF)(u,{cols:"12",sm:"4"},{default:(0,o.k6)((()=>[(0,o.bF)(p,{modelValue:a.sortBy,"onUpdate:modelValue":l[1]||(l[1]=e=>a.sortBy=e),items:a.sortOptions,label:"並び替え","prepend-inner-icon":"mdi-sort"},null,8,["modelValue","items"])])),_:1}),(0,o.bF)(u,{cols:"12",sm:"4"},{default:(0,o.k6)((()=>[(0,o.bF)(m,{modelValue:a.search,"onUpdate:modelValue":l[2]||(l[2]=e=>a.search=e),label:"実験を検索","prepend-inner-icon":"mdi-magnify",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),(0,o.bF)(c,null,{default:(0,o.k6)((()=>[(0,o.bF)(u,{cols:"12"},{default:(0,o.k6)((()=>[(0,o.bF)(i,null,{default:(0,o.k6)((()=>[(0,o.Lk)("div",X,[(0,o.bF)(c,null,{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.filteredExperiments,(e=>((0,o.uX)(),(0,o.Wv)(u,{key:e.id,cols:"12",sm:"6",md:"4"},{default:(0,o.k6)((()=>[(0,o.bF)(i,{variant:"outlined",color:a.getStatusColor(e),class:(0,g.C4)(["experiment-card",{completed:"completed"===e.status}]),onClick:l=>a.navigateToExperiment(e.id)},{default:(0,o.k6)((()=>[(0,o.bF)(v,null,{prepend:(0,o.k6)((()=>[100==n.updateProgress(e)?((0,o.uX)(),(0,o.Wv)(r,{key:0,color:a.getStatusColor(e),size:"large",class:"me-2"},{default:(0,o.k6)((()=>l[6]||(l[6]=[(0,o.eW)(" mdi-check-circle ")]))),_:2},1032,["color"])):((0,o.uX)(),(0,o.Wv)(r,{key:1,color:a.getStatusColor(e),size:"large",class:"me-2"},{default:(0,o.k6)((()=>l[7]||(l[7]=[(0,o.eW)(" mdi-flask ")]))),_:2},1032,["color"]))])),default:(0,o.k6)((()=>[(0,o.bF)(d,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,g.v_)(e.title),1)])),_:2},1024),(0,o.bF)(f,null,{default:(0,o.k6)((()=>[(0,o.eW)(" 予定日: "+(0,g.v_)(a.formatDate(e.date)),1)])),_:2},1024)])),_:2},1024),(0,o.bF)(k,null,{default:(0,o.k6)((()=>[(0,o.Lk)("div",I,(0,g.v_)(e.description||"説明なし"),1),(0,o.bF)(b,{class:"mt-2",color:a.getStatusColor(e),size:"small",label:""},{default:(0,o.k6)((()=>[(0,o.eW)(" 進捗："+(0,g.v_)(n.updateProgress(e))+"% ",1)])),_:2},1032,["color"])])),_:2},1024),(0,o.bF)(F,null,{default:(0,o.k6)((()=>[(0,o.bF)(h),(0,o.bF)(_,{variant:"text",color:"primary",to:`/experiment/${e.id}`},{default:(0,o.k6)((()=>[l[9]||(l[9]=(0,o.eW)(" 詳細を見る ")),(0,o.bF)(r,{end:""},{default:(0,o.k6)((()=>l[8]||(l[8]=[(0,o.eW)("mdi-arrow-right")]))),_:1})])),_:2},1032,["to"])])),_:2},1024)])),_:2},1032,["color","class","onClick"])])),_:2},1024)))),128))])),_:1}),0===a.filteredExperiments.length?((0,o.uX)(),(0,o.Wv)(x,{key:0,type:"info",variant:"tonal",class:"mt-4"},{default:(0,o.k6)((()=>l[10]||(l[10]=[(0,o.eW)(" 実験が見つかりません。新しい実験を登録してみましょう！ ")]))),_:1})):(0,o.Q3)("",!0)])])),_:1})])),_:1})])),_:1}),(0,o.bF)(_,{class:"floating-btn",color:"primary",icon:"mdi-plus",size:"x-large",onClick:l[3]||(l[3]=l=>e.$router.push("/register"))})])),_:1})}t(1454);var j=t(953),O={name:"DashboardScreen",methods:{updateProgress(e){const l=e.steps.length,t=e.steps.filter((e=>e.checked)).length,a=Math.round(t/l*100);return a}},setup(){const e=(0,c.rd)(),l=(0,j.KR)([]),t=(0,j.KR)(""),a=(0,j.KR)("date"),s=(0,j.KR)(""),n=[{title:"すべて",value:""},{title:"予定",value:"pending"},{title:"進行中",value:"inProgress"},{title:"完了",value:"completed"}],r=[{title:"日付順",value:"date"},{title:"タイトル順",value:"title"},{title:"ステータス順",value:"status"}],d=(0,o.EW)((()=>{let e=[...l.value];return s.value&&(e=e.filter((e=>e.title.toLowerCase().includes(s.value.toLowerCase())||e.description?.toLowerCase().includes(s.value.toLowerCase())))),t.value&&(e=e.filter((e=>e.status===t.value))),e.sort(((e,l)=>{switch(a.value){case"date":return new Date(e.date)-new Date(l.date);case"title":return e.title.localeCompare(l.title);case"status":return e.status.localeCompare(l.status);default:return 0}})),e})),i=async()=>{try{const e=(0,h.P)((0,h.rJ)(y,"experiments"),(0,h._M)("userId","==",V.currentUser?.displayName||"")),t=await(0,h.GG)(e);l.value=t.docs.map((e=>({id:e.id,...e.data()})))}catch(e){console.error("Error fetching experiments:",e)}},u=e=>new Date(e).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"}),p=e=>{const l=e.steps.length,t=e.steps.filter((e=>e.checked)).length,a=Math.round(t/l*100);return 0==a?"grey":100==a?"green":"blue"},m=e=>{const l={pending:"予定",inProgress:"進行中",completed:"完了"};return l[e]||"不明"},f=l=>{e.push(`/experiment/${l}`)};return(0,o.sV)((()=>{i()})),{experiments:l,filter:t,filterOptions:n,sortBy:a,sortOptions:r,search:s,filteredExperiments:d,formatDate:u,getStatusColor:p,getStatusText:m,navigateToExperiment:f}}};const K=(0,d.A)(O,[["render",R],["__scopeId","data-v-0777c889"]]);var L=K;function N(e,l,t,a,s,n){const r=(0,o.g2)("v-icon"),d=(0,o.g2)("v-card-title"),i=(0,o.g2)("v-text-field"),u=(0,o.g2)("v-textarea"),c=(0,o.g2)("v-file-input"),p=(0,o.g2)("ExperimentEditor"),m=(0,o.g2)("v-progress-linear"),f=(0,o.g2)("v-expansion-panel-title"),v=(0,o.g2)("v-btn"),b=(0,o.g2)("v-expansion-panel-text"),k=(0,o.g2)("v-expansion-panel"),h=(0,o.g2)("v-expansion-panels"),_=(0,o.g2)("v-row"),F=(0,o.g2)("v-form"),x=(0,o.g2)("v-card-text"),w=(0,o.g2)("v-card"),y=(0,o.g2)("v-col"),V=(0,o.g2)("v-container");return(0,o.uX)(),(0,o.Wv)(V,{fluid:""},{default:(0,o.k6)((()=>[(0,o.bF)(_,{class:"mb-6"},{default:(0,o.k6)((()=>[(0,o.bF)(y,{cols:"12"},{default:(0,o.k6)((()=>[(0,o.bF)(w,{class:"mb-4"},{default:(0,o.k6)((()=>[(0,o.bF)(d,{class:"text-h5 d-flex align-center"},{default:(0,o.k6)((()=>[(0,o.bF)(r,{start:"",class:"me-2"},{default:(0,o.k6)((()=>l[7]||(l[7]=[(0,o.eW)("mdi-file-clock-outline")]))),_:1}),l[8]||(l[8]=(0,o.eW)(" 実験スケジュールを登録 "))])),_:1}),(0,o.bF)(x,null,{default:(0,o.k6)((()=>[(0,o.bF)(F,{ref:"form",modelValue:a.valid,"onUpdate:modelValue":l[6]||(l[6]=e=>a.valid=e)},{default:(0,o.k6)((()=>[(0,o.bF)(i,{modelValue:a.experimentData.purpose,"onUpdate:modelValue":l[0]||(l[0]=e=>a.experimentData.purpose=e),label:"実験の目的",required:"",rules:[e=>!!e||"実験の目的は必須です"]},null,8,["modelValue","rules"]),(0,o.bF)(u,{modelValue:a.experimentData.procedure,"onUpdate:modelValue":l[1]||(l[1]=e=>a.experimentData.procedure=e),label:"実験手順",required:"",rules:[e=>!!e||"実験手順は必須です"]},null,8,["modelValue","rules"]),(0,o.bF)(u,{modelValue:a.experimentData.precautions,"onUpdate:modelValue":l[2]||(l[2]=e=>a.experimentData.precautions=e),label:"注意事項"},null,8,["modelValue"]),(0,o.bF)(c,{modelValue:a.files,"onUpdate:modelValue":[l[3]||(l[3]=e=>a.files=e),a.handleFileUpload],label:"写真・PDFをアップロード",accept:"image/*,.pdf",multiple:"","show-size":"",loading:a.ocrProcessing,disabled:a.ocrProcessing,hint:"画像ファイルをアップロードしてください","persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","loading","disabled"]),a.showEditor?((0,o.uX)(),(0,o.Wv)(p,{key:0,"experiment-data":a.generatedData,onSaved:a.handleSaved},null,8,["experiment-data","onSaved"])):(0,o.Q3)("",!0),a.ocrProcessing?((0,o.uX)(),(0,o.Wv)(m,{key:1,indeterminate:"",color:"primary",class:"mb-4"})):(0,o.Q3)("",!0),a.ocrResults.length>0?((0,o.uX)(),(0,o.Wv)(h,{key:2},{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.ocrResults,((e,t)=>((0,o.uX)(),(0,o.Wv)(k,{key:t},{default:(0,o.k6)((()=>[(0,o.bF)(f,null,{default:(0,o.k6)((()=>[(0,o.eW)(" 文字認識結果 #"+(0,g.v_)(t+1),1)])),_:2},1024),(0,o.bF)(b,null,{default:(0,o.k6)((()=>[(0,o.bF)(u,{modelValue:a.ocrResults[t].text,"onUpdate:modelValue":e=>a.ocrResults[t].text=e,label:"抽出テキスト",hint:"テキストを編集できます","auto-grow":"",rows:"5"},null,8,["modelValue","onUpdate:modelValue"]),(0,o.bF)(v,{color:"primary",size:"small",class:"mt-2",onClick:e=>a.appendToProcedure(t)},{default:(0,o.k6)((()=>l[9]||(l[9]=[(0,o.eW)(" 手順に追加 ")]))),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})):(0,o.Q3)("",!0),(0,o.bF)(_,{class:"mt-4"},{default:(0,o.k6)((()=>[(0,o.bF)(v,{disabled:!a.valid,color:"primary",onClick:l[4]||(l[4]=e=>n.processWithGemini())},{default:(0,o.k6)((()=>l[10]||(l[10]=[(0,o.eW)(" AIでまとめる ")]))),_:1},8,["disabled"])])),_:1}),(0,o.bF)(p,{modelValue:a.showEditor,"onUpdate:modelValue":l[5]||(l[5]=e=>a.showEditor=e),"experiment-data":a.generatedData,onSaved:a.handleSaved},null,8,["modelValue","experiment-data","onSaved"])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}const $={key:0,class:"ml-4"};function A(e,l,t,s,n,r){const d=(0,o.g2)("v-spacer"),i=(0,o.g2)("v-icon"),u=(0,o.g2)("v-btn"),c=(0,o.g2)("v-card-title"),p=(0,o.g2)("v-text-field"),m=(0,o.g2)("v-col"),f=(0,o.g2)("v-textarea"),v=(0,o.g2)("v-row"),b=(0,o.g2)("v-chip"),k=(0,o.g2)("v-chip-group"),h=(0,o.g2)("v-card"),_=(0,o.g2)("v-form"),F=(0,o.g2)("v-card-text"),x=(0,o.g2)("v-card-actions"),w=(0,o.g2)("v-dialog");return(0,o.uX)(),(0,o.Wv)(w,{"model-value":t.modelValue,"onUpdate:modelValue":l[5]||(l[5]=l=>e.$emit("update:modelValue",l)),"max-width":"900px"},{default:(0,o.k6)((()=>[(0,o.bF)(h,null,{default:(0,o.k6)((()=>[(0,o.bF)(c,{class:"text-h5"},{default:(0,o.k6)((()=>[l[7]||(l[7]=(0,o.eW)(" 実験データの確認・編集 ")),(0,o.bF)(d),(0,o.bF)(u,{icon:"",onClick:s.closeDialog},{default:(0,o.k6)((()=>[(0,o.bF)(i,null,{default:(0,o.k6)((()=>l[6]||(l[6]=[(0,o.eW)("mdi-close")]))),_:1})])),_:1},8,["onClick"])])),_:1}),s.localData?((0,o.uX)(),(0,o.Wv)(F,{key:0},{default:(0,o.k6)((()=>[(0,o.bF)(_,{ref:"form"},{default:(0,o.k6)((()=>[(0,o.bF)(v,null,{default:(0,o.k6)((()=>[(0,o.bF)(m,{cols:"12",sm:"6"},{default:(0,o.k6)((()=>[(0,o.bF)(p,{modelValue:s.localData.title,"onUpdate:modelValue":l[0]||(l[0]=e=>s.localData.title=e),label:"実験タイトル",required:""},null,8,["modelValue"])])),_:1}),(0,o.bF)(m,{cols:"12",sm:"6"},{default:(0,o.k6)((()=>[(0,o.bF)(p,{modelValue:s.localData.date,"onUpdate:modelValue":l[1]||(l[1]=e=>s.localData.date=e),label:"実施日",type:"date"},null,8,["modelValue"])])),_:1}),(0,o.bF)(m,{cols:"12"},{default:(0,o.k6)((()=>[(0,o.bF)(f,{modelValue:s.localData.objective,"onUpdate:modelValue":l[2]||(l[2]=e=>s.localData.objective=e),label:"実験目的",rows:"3"},null,8,["modelValue"])])),_:1})])),_:1}),(0,o.bF)(h,{class:"mb-4 pa-4"},{default:(0,o.k6)((()=>[(0,o.bF)(c,{class:"text-h6"},{default:(0,o.k6)((()=>l[8]||(l[8]=[(0,o.eW)("実験手順")]))),_:1}),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(s.localData.steps,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{key:t,class:"mb-4"},[(0,o.bF)(v,null,{default:(0,o.k6)((()=>[(0,o.bF)(m,{cols:"12"},{default:(0,o.k6)((()=>[(0,o.bF)(p,{modelValue:e.description,"onUpdate:modelValue":l=>e.description=l,label:`Step ${e.stepId}: 手順説明`},null,8,["modelValue","onUpdate:modelValue","label"])])),_:2},1024)])),_:2},1024),(0,o.bF)(v,{class:"ml-4"},{default:(0,o.k6)((()=>[(0,o.bF)(m,{cols:"12"},{default:(0,o.k6)((()=>[(0,o.bF)(k,{column:""},{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.materials,((l,t)=>((0,o.uX)(),(0,o.Wv)(b,{key:t,closable:"","onClick:close":l=>e.materials.splice(t,1)},{default:(0,o.k6)((()=>[(0,o.eW)((0,g.v_)(l),1)])),_:2},1032,["onClick:close"])))),128))])),_:2},1024),(0,o.bF)(p,{modelValue:s.newMaterial,"onUpdate:modelValue":l[3]||(l[3]=e=>s.newMaterial=e),label:"材料を追加","append-icon":"mdi-plus","onClick:append":l=>s.addMaterial(e),onKeyup:(0,a.jR)((l=>s.addMaterial(e)),["enter"])},null,8,["modelValue","onClick:append","onKeyup"])])),_:2},1024)])),_:2},1024),e.subSteps?((0,o.uX)(),(0,o.CE)("div",$,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.subSteps,((e,l)=>((0,o.uX)(),(0,o.CE)("div",{key:l},[(0,o.bF)(v,null,{default:(0,o.k6)((()=>[(0,o.bF)(m,{cols:"12"},{default:(0,o.k6)((()=>[(0,o.bF)(p,{modelValue:e.description,"onUpdate:modelValue":l=>e.description=l,label:`サブステップ ${e.stepId}`},null,8,["modelValue","onUpdate:modelValue","label"])])),_:2},1024)])),_:2},1024)])))),128))])):(0,o.Q3)("",!0),(0,o.bF)(p,{modelValue:e.notes,"onUpdate:modelValue":l=>e.notes=l,label:"注意点",class:"ml-4"},null,8,["modelValue","onUpdate:modelValue"])])))),128))])),_:1}),(0,o.bF)(h,{class:"mb-4 pa-4"},{default:(0,o.k6)((()=>[(0,o.bF)(c,{class:"text-h6"},{default:(0,o.k6)((()=>l[9]||(l[9]=[(0,o.eW)("注意事項")]))),_:1}),(0,o.bF)(v,null,{default:(0,o.k6)((()=>[(0,o.bF)(m,{cols:"12"},{default:(0,o.k6)((()=>[(0,o.bF)(k,{column:""},{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(s.localData.precautions,((e,l)=>((0,o.uX)(),(0,o.Wv)(b,{key:l,closable:"","onClick:close":e=>s.localData.precautions.splice(l,1)},{default:(0,o.k6)((()=>[(0,o.eW)((0,g.v_)(e),1)])),_:2},1032,["onClick:close"])))),128))])),_:1}),(0,o.bF)(p,{modelValue:s.newPrecaution,"onUpdate:modelValue":l[4]||(l[4]=e=>s.newPrecaution=e),label:"注意事項を追加","append-icon":"mdi-plus","onClick:append":s.addPrecaution,onKeyup:(0,a.jR)(s.addPrecaution,["enter"])},null,8,["modelValue","onClick:append","onKeyup"])])),_:1})])),_:1})])),_:1})])),_:1},512)])),_:1})):(0,o.Q3)("",!0),(0,o.bF)(x,null,{default:(0,o.k6)((()=>[(0,o.bF)(d),(0,o.bF)(u,{color:"error",onClick:s.closeDialog},{default:(0,o.k6)((()=>l[10]||(l[10]=[(0,o.eW)("キャンセル")]))),_:1},8,["onClick"]),s.localData.id?s.localData.id?((0,o.uX)(),(0,o.Wv)(u,{key:1,color:"primary",onClick:s.saveEditedData},{default:(0,o.k6)((()=>l[12]||(l[12]=[(0,o.eW)("更新")]))),_:1},8,["onClick"])):(0,o.Q3)("",!0):((0,o.uX)(),(0,o.Wv)(u,{key:0,color:"primary",onClick:s.saveExperiment},{default:(0,o.k6)((()=>l[11]||(l[11]=[(0,o.eW)("保存")]))),_:1},8,["onClick"]))])),_:1})])),_:1})])),_:1},8,["model-value"])}var q={name:"ExperimentEditor",props:{modelValue:{type:Boolean,required:!0},experimentData:{type:Object,required:!0}},emits:["update:modelValue","saved"],setup(e,{emit:l}){const t=(0,j.KR)(null),a=(0,j.KR)(""),s=(0,j.KR)("");(0,o.wB)((()=>e.experimentData),(e=>{e&&(t.value=JSON.parse(JSON.stringify(e)))}),{immediate:!0,deep:!0});const n=()=>{l("update:modelValue",!1)},r=e=>{a.value.trim()&&(e.materials.push(a.value.trim()),a.value="")},d=()=>{s.value.trim()&&(t.value.precautions.push(s.value.trim()),s.value="")},i=async()=>{try{const e=(0,h.aU)();t.value.createdAt=new Date;const a=await(0,h.gS)((0,h.rJ)(e,"experiments"),t.value);l("saved",a.id),n(),alert("実験データが保存されました")}catch(e){console.error("Error saving experiment:",e),alert("保存中にエラーが発生しました")}},u=async()=>{try{const e=(0,h.aU)(),a=(0,h.H9)(e,"experiments",t.value.id);await(0,h.mZ)(a,{title:t.value.title,objective:t.value.objective,date:t.value.date,steps:t.value.steps,precautions:t.value.precautions,equipmentPhotos:t.value.equipmentPhotos}),l("saved",a.id),n()}catch(e){console.error("進捗保存エラー:",e)}};return{localData:t,newMaterial:a,newPrecaution:s,closeDialog:n,addMaterial:r,addPrecaution:d,saveExperiment:i,saveEditedData:u}}};const M=(0,d.A)(q,[["render",A]]);var Q=M,z=t(4995);const{GoogleGenerativeAI:J}=t(6445);var T={name:"RegisterScreen",components:{ExperimentEditor:Q},data(){return{displayName:""}},created(){(0,_.hg)(V,(e=>{this.displayName=e?e.displayName:""}))},setup(){const e=(0,j.KR)(!1),l=(0,j.KR)(!1),t=(0,j.KR)(!1),a=(0,j.KR)([]),o=(0,j.KR)(!1),s=(0,j.KR)([]),n=(0,c.rd)(),r=(0,j.Kh)({purpose:"",procedure:"",precautions:"",scheduledDate:null,notificationEnabled:!1}),d=()=>{e.value=!e.value},i=(0,j.KR)(null),u=async e=>{if(!e||!Array.isArray(e)||0===e.length)return void console.log("No files selected");const l=e.filter((e=>e&&e.type&&e.type.startsWith("image/")));if(0!==l.length){o.value=!0,s.value=[];try{const e=await(0,z.createWorker)("jpn");for(const a of l)try{const l=await e.recognize(a);s.value.push({text:l.data.text,filename:a.name})}catch(t){console.error(`Error processing file ${a.name}:`,t),s.value.push({text:"",error:t.message,filename:a.name})}await e.terminate()}catch(t){console.error("OCR processing failed:",t)}finally{o.value=!1}}else console.log("No valid image files found")},p=e=>{s.value[e]&&s.value[e].text&&(r.procedure=r.procedure?`${r.procedure}\n\n${s.value[e].text}`:s.value[e].text,s.value="")},m=async()=>{if(r.procedure){t.value=!0;try{const e=(0,h.aU)();await(0,h.gS)((0,h.rJ)(e,"experiments"),{...r,generatedData:i.value,createdAt:new Date})}catch(e){console.error("Data submission failed:",e)}finally{t.value=!1}}else console.log("No procedure data")},f=()=>{e.value=!1,i.value=null,n.push("/dashboard")};return{valid:l,loading:t,files:a,ocrProcessing:o,ocrResults:s,experimentData:r,generatedData:i,handleFileUpload:u,appendToProcedure:p,submitData:m,showEditor:e,handleSaved:f,toggleEditor:d}},methods:{async processWithGemini(){const e=this.experimentData;if(console.log(e),!e)return void console.log("No text to process");const l=new J("AIzaSyDabHWSMe6kUQ0YOd5QrK1c8gd3Lur-nWw"),t=l.getGenerativeModel({model:"gemini-1.5-flash"});console.log(t);const a=12345,o=`\n      outpu JSON only(without writing \`\`\`json)\n    実験をしています．つぎのデータ簡単にまとめ，それを基に，以下のJSON Schemaのような形式でまとめて出力してください.文章に余計な空白は含めないでください.JSONは{からはじめて\`などは含まないでください.データは画像認識で文字起こしされたものであり，変な場合があるので，補正ができるならば考慮.\n\n    ${e.purpose},${e.procedure},${e.precautions}\n    {\n      "experimentId": "${a}",\n      "userId": "${this.displayName}",\n      "title": "",\n      "objective": "",\n        "date": "${this.experimentData.scheduledDate}",\n      "steps": [\n        {\n          "stepId": "1",\n          "description": "",\n          "materials": ["", "", ""],\n          "checked": false,\n          "notes": "",\n          "subSteps": [\n            {\n              "stepId": "1.1",\n              "description": "",\n              "checked": false,\n              "notes": ""\n            }\n          ]\n        },\n        {\n          "stepId": "2",\n          "description": "",\n          "materials": [""],\n          "checked": false,\n          "notes": ""\n        },\n        {\n          "stepId": "3",\n          "description": "",\n          "materials": [""],\n          "checked": false,\n          "notes": ""\n        }\n      ],\n      "precautions": [\n        "",\n        ""\n      ],\n      "equipmentPhotos": [\n        {\n          "name": "",\n          "photoUrl": ""\n        }\n      ]\n    }`;try{const e=await t.generateContent(o),l=e.response,a=l.text();console.log(a,typeof a);try{const e=JSON.parse(a);this.generatedData=e,this.showEditor=!0,console.log(this.showEditor)}catch(s){console.error("JSON parsing error:",s),alert("データの形式が不正です。もう一度お試しください。")}}catch(n){console.error("API error:",n),alert("データの生成中にエラーが発生しました。")}}}};const B=(0,d.A)(T,[["render",N],["__scopeId","data-v-641d9cea"]]);var G=B;const H={class:"max-w-4xl mx-auto p-6"},Y={class:"text-subtitle-2"},Z={class:"mb-4 overflow-auto"},ee={class:"progress-bar-container"},le={class:"d-flex justify-space-between mb-2"},te={class:"text-subtitle-2 font-weight-medium"},ae={class:"d-flex align-center"},oe={class:"font-weight-bold"},se={class:"text-subtitle-2"},ne={key:1,class:"mt-4"},re={key:0,class:"text-center"},de=["src","alt"],ie={class:"mt-2"};function ue(e,l,t,s,n,r){const d=(0,o.g2)("v-card-title"),i=(0,o.g2)("v-card-text"),u=(0,o.g2)("v-card"),c=(0,o.g2)("v-progress-linear"),p=(0,o.g2)("v-icon"),m=(0,o.g2)("v-list-item-icon"),f=(0,o.g2)("v-list-item-title"),v=(0,o.g2)("v-list-item-content"),b=(0,o.g2)("v-list-item"),k=(0,o.g2)("v-list"),h=(0,o.g2)("v-btn"),_=(0,o.g2)("ExperimentEditor"),F=(0,o.g2)("v-checkbox"),x=(0,o.g2)("v-expansion-panel-header"),w=(0,o.g2)("v-list-item-subtitle"),y=(0,o.g2)("v-alert"),V=(0,o.g2)("v-card-actions"),W=(0,o.g2)("v-expansion-panel-content"),C=(0,o.g2)("v-expansion-panel"),P=(0,o.g2)("v-expansion-panels"),E=(0,o.g2)("v-spacer"),D=(0,o.g2)("v-dialog");return(0,o.uX)(),(0,o.CE)("div",H,[(0,o.bF)(u,{class:"mb-6"},{default:(0,o.k6)((()=>[(0,o.bF)(d,{class:"text-h5 overflow-auto"},{default:(0,o.k6)((()=>[(0,o.eW)((0,g.v_)(n.experiment.title)+" ",1),(0,o.Lk)("div",Y,"実施予定日: "+(0,g.v_)(n.experiment.date),1)])),_:1}),(0,o.bF)(i,null,{default:(0,o.k6)((()=>[(0,o.Lk)("div",Z,[l[6]||(l[6]=(0,o.Lk)("h3",{class:"font-weight-bold mb-2"},"実験の目的:",-1)),(0,o.Lk)("p",null,(0,g.v_)(n.experiment.objective),1)])])),_:1})])),_:1}),(0,o.Lk)("div",ee,[(0,o.Lk)("div",le,[l[7]||(l[7]=(0,o.Lk)("span",{class:"text-subtitle-2 font-weight-medium"},"進捗状況",-1)),(0,o.Lk)("span",te,(0,g.v_)(n.progressPercentage)+"%",1)]),(0,o.bF)(c,{modelValue:n.progressPercentage,"onUpdate:modelValue":l[0]||(l[0]=e=>n.progressPercentage=e),color:"primary",height:"10"},null,8,["modelValue"])]),(0,o.bF)(u,{class:"mb-6 warning-card"},{default:(0,o.k6)((()=>[(0,o.bF)(d,{class:"d-flex align-center"},{default:(0,o.k6)((()=>[(0,o.bF)(p,{color:"warning",class:"mr-2"},{default:(0,o.k6)((()=>l[8]||(l[8]=[(0,o.eW)("mdi-alert")]))),_:1}),l[9]||(l[9]=(0,o.eW)(" 注意事項 "))])),_:1}),(0,o.bF)(i,null,{default:(0,o.k6)((()=>[(0,o.bF)(k,null,{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.experiment.precautions,((e,t)=>((0,o.uX)(),(0,o.Wv)(b,{key:t},{default:(0,o.k6)((()=>[(0,o.bF)(m,null,{default:(0,o.k6)((()=>[(0,o.bF)(p,{color:"warning"},{default:(0,o.k6)((()=>l[10]||(l[10]=[(0,o.eW)("mdi-alert-circle-outline")]))),_:1})])),_:1}),(0,o.bF)(v,null,{default:(0,o.k6)((()=>[(0,o.bF)(f,{class:"overflow-auto"},{default:(0,o.k6)((()=>[(0,o.eW)((0,g.v_)(e),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1}),(0,o.bF)(h,{class:"floating-btn",color:"primary",icon:"mdi-pencil",size:"x-large",onClick:l[1]||(l[1]=e=>n.showEditor=!n.showEditor)}),(0,o.bF)(P,{class:"scrollable"},{default:(0,o.k6)((()=>[(0,o.bF)(_,{modelValue:n.showEditor,"onUpdate:modelValue":l[2]||(l[2]=e=>n.showEditor=e),"experiment-data":n.experiment,onSaved:r.loadExperiment},null,8,["modelValue","experiment-data","onSaved"]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.experiment.steps,(e=>((0,o.uX)(),(0,o.Wv)(C,{key:e.stepId},{default:(0,o.k6)((()=>[(0,o.bF)(x,null,{default:(0,o.k6)((()=>[(0,o.Lk)("div",ae,[(0,o.bF)(F,{modelValue:e.checked,"onUpdate:modelValue":l=>e.checked=l,onChange:r.updateProgress,onClick:l[3]||(l[3]=(0,a.D$)((()=>{}),["stop"])),class:"mr-2"},null,8,["modelValue","onUpdate:modelValue","onChange"]),(0,o.Lk)("div",null,[(0,o.Lk)("div",oe,"Step "+(0,g.v_)(e.stepId),1),(0,o.Lk)("div",se,(0,g.v_)(e.description),1)])])])),_:2},1024),(0,o.bF)(W,null,{default:(0,o.k6)((()=>[e.materials&&e.materials.length?((0,o.uX)(),(0,o.Wv)(u,{key:0,flat:""},{default:(0,o.k6)((()=>[(0,o.bF)(d,{class:"text-subtitle-1 font-weight-bold"},{default:(0,o.k6)((()=>l[11]||(l[11]=[(0,o.eW)(" 必要な器具・材料: ")]))),_:1}),(0,o.bF)(i,null,{default:(0,o.k6)((()=>[(0,o.bF)(k,{dense:""},{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.materials,((e,t)=>((0,o.uX)(),(0,o.Wv)(b,{key:t},{default:(0,o.k6)((()=>[(0,o.bF)(m,null,{default:(0,o.k6)((()=>[(0,o.bF)(p,null,{default:(0,o.k6)((()=>l[12]||(l[12]=[(0,o.eW)("mdi-flask")]))),_:1})])),_:1}),(0,o.bF)(v,null,{default:(0,o.k6)((()=>[(0,o.bF)(f,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,g.v_)(e),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1024)])),_:2},1024)):(0,o.Q3)("",!0),e.subSteps?((0,o.uX)(),(0,o.CE)("div",ne,[(0,o.bF)(u,{flat:""},{default:(0,o.k6)((()=>[(0,o.bF)(d,{class:"text-subtitle-1 font-weight-bold"},{default:(0,o.k6)((()=>l[13]||(l[13]=[(0,o.eW)(" 詳細手順: ")]))),_:1}),(0,o.bF)(i,null,{default:(0,o.k6)((()=>[(0,o.bF)(k,{dense:""},{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.subSteps,(e=>((0,o.uX)(),(0,o.Wv)(b,{key:e.stepId},{default:(0,o.k6)((()=>[(0,o.bF)(m,null,{default:(0,o.k6)((()=>[(0,o.bF)(F,{modelValue:e.checked,"onUpdate:modelValue":l=>e.checked=l,onChange:r.updateProgress},null,8,["modelValue","onUpdate:modelValue","onChange"])])),_:2},1024),(0,o.bF)(v,null,{default:(0,o.k6)((()=>[(0,o.bF)(f,{class:"overflow-auto"},{default:(0,o.k6)((()=>[(0,o.eW)((0,g.v_)(e.stepId)+": "+(0,g.v_)(e.description),1)])),_:2},1024),e.notes?((0,o.uX)(),(0,o.Wv)(w,{key:0,class:"mt-1"},{default:(0,o.k6)((()=>[(0,o.eW)(" Note: "+(0,g.v_)(e.notes),1)])),_:2},1024)):(0,o.Q3)("",!0)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1024)])),_:2},1024)])):(0,o.Q3)("",!0),e.notes?((0,o.uX)(),(0,o.Wv)(u,{key:2,flat:"",class:"mt-4"},{default:(0,o.k6)((()=>[(0,o.bF)(d,{class:"text-subtitle-1 font-weight-bold"},{default:(0,o.k6)((()=>l[14]||(l[14]=[(0,o.eW)(" 注意点: ")]))),_:1}),(0,o.bF)(i,null,{default:(0,o.k6)((()=>[(0,o.bF)(y,{type:"info",text:"",outlined:""},{default:(0,o.k6)((()=>[(0,o.eW)((0,g.v_)(e.notes),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)):(0,o.Q3)("",!0),(0,o.bF)(u,{flat:"",class:"mt-4"},{default:(0,o.k6)((()=>[(0,o.bF)(V,null,{default:(0,o.k6)((()=>[(0,o.bF)(h,{color:"primary",outlined:"",onClick:l=>r.capturePhoto(e.stepId)},{default:(0,o.k6)((()=>[(0,o.bF)(p,{left:""},{default:(0,o.k6)((()=>l[15]||(l[15]=[(0,o.eW)("mdi-camera")]))),_:1}),l[16]||(l[16]=(0,o.eW)(" 写真を撮影 "))])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),(0,o.bF)(D,{modelValue:n.showPhotoDialog,"onUpdate:modelValue":l[5]||(l[5]=e=>n.showPhotoDialog=e),"max-width":"500px"},{default:(0,o.k6)((()=>[(0,o.bF)(u,null,{default:(0,o.k6)((()=>[(0,o.bF)(d,null,{default:(0,o.k6)((()=>[l[18]||(l[18]=(0,o.eW)(" 写真プレビュー ")),(0,o.bF)(E),(0,o.bF)(h,{icon:"",onClick:l[4]||(l[4]=e=>n.showPhotoDialog=!1)},{default:(0,o.k6)((()=>[(0,o.bF)(p,null,{default:(0,o.k6)((()=>l[17]||(l[17]=[(0,o.eW)("mdi-close")]))),_:1})])),_:1})])),_:1}),(0,o.bF)(i,null,{default:(0,o.k6)((()=>[n.selectedPhoto?((0,o.uX)(),(0,o.CE)("div",re,[(0,o.Lk)("img",{src:n.selectedPhoto.photoUrl,class:"max-width-100",alt:n.selectedPhoto.name},null,8,de),(0,o.Lk)("div",ie,(0,g.v_)(n.selectedPhoto.name),1)])):(0,o.Q3)("",!0)])),_:1})])),_:1})])),_:1},8,["modelValue"])])}var ce={name:"ExperimentViewer",components:{ExperimentEditor:Q},data(){return{experiment:{title:"",objective:"",date:"",steps:[],precautions:[],equipmentPhotos:[],id:""},progressPercentage:0,showPhotoDialog:!1,selectedPhoto:null,showEditor:!1}},async mounted(){await this.loadExperiment(),this.updateProgress()},methods:{async loadExperiment(){this.experiment.id=this.$route.params.id;try{const e=(0,h.H9)(y,"experiments",this.experiment.id),l=await(0,h.x7)(e);l.exists()&&(this.experiment={id:l.id,...l.data()})}catch(e){console.error("実験データ読み込みエラー:",e)}},updateProgress(){const e=this.experiment.steps.length,l=this.experiment.steps.filter((e=>e.checked)).length;this.progressPercentage=Math.round(l/e*100),this.saveProgress()},async saveProgress(){try{const e=(0,h.H9)(y,"experiments",this.experiment.id);await(0,h.mZ)(e,{steps:this.experiment.steps})}catch(e){console.error("進捗保存エラー:",e)}},async capturePhoto(e){console.log(`Step ${e}の写真を撮影`)}}};const pe=(0,d.A)(ce,[["render",ue],["__scopeId","data-v-acfa749e"]]);var me=pe;const fe=[{path:"/",name:"Start",component:v},{path:"/login",name:"Login",component:P},{path:"/signup",name:"Signup",component:U},{path:"/dashboard",name:"Dashboard",component:L},{path:"/register",name:"Register",component:G},{path:"/experiment/:id",name:"Experiment",component:me,props:!0}],ve=(0,c.aE)({history:(0,c.LA)("/jikkenTodo/"),routes:fe});var ge=ve,be=(t(5524),t(4825)),ke=t(2938),he=t(3379),_e=t(1050),Fe=(0,be.$N)({components:ke,directives:he,icons:{defaultSet:"mdi",aliases:_e.z,sets:{mdi:_e.r}},theme:{defaultTheme:"light"},defaults:{VDialog:{scrollable:!0,VCard:{elevation:0}}}}),xe=t(4335),we=t(1021);const ye=(0,a.Ef)(u);ye.use(ge),ye.use(Fe),ye.use(we.A),ye.use(xe.A),ye.mount("#app")}},l={};function t(a){var o=l[a];if(void 0!==o)return o.exports;var s=l[a]={id:a,loaded:!1,exports:{}};return e[a].call(s.exports,s,s.exports,t),s.loaded=!0,s.exports}t.m=e,function(){t.amdO={}}(),function(){var e=[];t.O=function(l,a,o,s){if(!a){var n=1/0;for(u=0;u<e.length;u++){a=e[u][0],o=e[u][1],s=e[u][2];for(var r=!0,d=0;d<a.length;d++)(!1&s||n>=s)&&Object.keys(t.O).every((function(e){return t.O[e](a[d])}))?a.splice(d--,1):(r=!1,s<n&&(n=s));if(r){e.splice(u--,1);var i=o();void 0!==i&&(l=i)}}return l}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[a,o,s]}}(),function(){t.d=function(e,l){for(var a in l)t.o(l,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:l[a]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.hmd=function(e){return e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e}}(),function(){t.o=function(e,l){return Object.prototype.hasOwnProperty.call(e,l)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};t.O.j=function(l){return 0===e[l]};var l=function(l,a){var o,s,n=a[0],r=a[1],d=a[2],i=0;if(n.some((function(l){return 0!==e[l]}))){for(o in r)t.o(r,o)&&(t.m[o]=r[o]);if(d)var u=d(t)}for(l&&l(a);i<n.length;i++)s=n[i],t.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return t.O(u)},a=self["webpackChunkjikken_todo_app"]=self["webpackChunkjikken_todo_app"]||[];a.forEach(l.bind(null,0)),a.push=l.bind(null,a.push.bind(a))}();var a=t.O(void 0,[504],(function(){return t(1865)}));a=t.O(a)})();
//# sourceMappingURL=app.28b6194c.js.map